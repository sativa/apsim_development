<folder name="New Simulations" image="Images/layout_center24.png" version="8">
  <simulation name="Blank Simulation">
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1989</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Blank Simulation.sum</filename>
    </summaryfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
      </manager>
    </area>
  </simulation>
  <shared name="shared" />
  <simulation name="Continuous Wheat Simulation">
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1989</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Sowing rule">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing], crop_class = [class]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">200</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">100</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">hartog</cultivar>
            <class type="classes" croppropertyname="crop" description="Enter crop growth class : ">plant</class>
            <row_spacing type="text" description="Enter row spacing (mm) : ">250</row_spacing>
          </category>
        </rule>
        <rule name="Harvesting rule">
          <condition name="end_of_day">

           if [crop].stage_name = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
           endif

            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">wheat</crop>
          </category>
        </rule>
        <rule name="Sowing fertiliser">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="On which module should the event come from : ">wheat</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">sowing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">1000.</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <wheat />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="wheat.biomass" description="Biomass" array="?" units="kg/ha" />
          <variable name="wheat.yield" description="Yield" array="?" units="kg/ha" />
          <variable name="wheat.grain_protein" description="grain protein content" array="?" units="%" />
          <variable name="wheat.grain_size" description="Size of each grain" array="?" units="g" />
          <variable name="esw" array="?" description="Extractable Soil Water (mm)" VariableType="Water" />
        </variables>
        <events name="Reporting Frequency">
          <event name="wheat.harvesting" description="" />
        </events>
      </outputfile>
      <soil name="Jimbour,Waco (#016)">
        <Site>Jimbour</Site>
        <Region>South East Queensland</Region>
        <LocalName>Waco</LocalName>
        <SoilType>Black Vertosol</SoilType>
        <NearestTown>Jimbour, Q 4352</NearestTown>
        <NaturalVegetation>Grassland, mainly Qld bluegrass</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.15</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1.04</oc>
            <ph>8.4</ph>
            <fbiom>0.025</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <ec>0.2</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.03</bd>
            <ll15>0.29</ll15>
            <airdry>0.26</airdry>
            <dul>0.53</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>8.8</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.25</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.31</ec>
            <ll name="Barley">0.32</ll>
            <kl name="Barley">0.08</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.36</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.39</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.35</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="Barley">0.38</ll>
            <kl name="Barley">0.06</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.43</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.08</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.38</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.06</bd>
            <ll15>0.3</ll15>
            <airdry>0.3</airdry>
            <dul>0.52</dul>
            <sat>0.57</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.77</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.59</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.04</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.51</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.3</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.37</ll>
            <kl name="Maize">0.06</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.09</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.35</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.11</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.45</oc>
            <ph>9.1</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.84</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.02</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.31</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.4</ll>
            <kl name="Maize">0.04</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.07</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.12</bd>
            <ll15>0.32</ll15>
            <airdry>0.32</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.27</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.93</ec>
            <ll name="Barley">0.41</ll>
            <kl name="Barley">0.01</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.32</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.42</ll>
            <kl name="Maize">0.02</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.05</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.41</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.15</bd>
            <ll15>0.33</ll15>
            <airdry>0.33</airdry>
            <dul>0.48</dul>
            <sat>0.53</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.22</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.48</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.48</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.33</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.48</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.48</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.48</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.18</bd>
            <ll15>0.34</ll15>
            <airdry>0.34</airdry>
            <dul>0.47</dul>
            <sat>0.52</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.16</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.06</ec>
            <ll name="Barley">0.47</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.47</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.34</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.47</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.47</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.47</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.35</ll15>
            <airdry>0.35</airdry>
            <dul>0.46</dul>
            <sat>0.51</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.13</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.05</ec>
            <ll name="Barley">0.46</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.46</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.35</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.46</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.46</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.46</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.25</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.44</dul>
            <sat>0.49</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.12</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.44</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.44</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.36</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.44</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.42</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.44</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.44</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.503</no3>
              <nh4>0.599</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Continuous Wheat Simulation with Climate Change">
    <memo name="Read Me">e1xydGYxXGFuc2lcYW5zaWNwZzEyNTJcZGVmZjBcZGVmbGFuZzMwODF7XGZvbnR0Ymx7XGYwXGZuaWxcZmNoYXJzZXQwIE1pY3Jvc29mdCBTYW5zIFNlcmlmO319DQpcdmlld2tpbmQ0XHVjMVxwYXJkXGYwXGZzMjkgQ2xpbWF0ZSBDaGFuZ2UgaW4gQVBTSU0gU2ltdWxhdGlvbnNcZnMxN1xwYXINClxwYXINClRvIHBlcmZvcm0gYSBzaW1wbGUgc2ltdWxhdGlvbiB0byBxdWFudGlmeSB0aGUgZWZmZWN0cyBvZiBjbGltYXRlIGNoYW5nZSBvbiBwcm9kdWN0aW9uIHN5c3RlbSBzaW1wbHkgZHJhZyBhIGNsaW1hdGUgY2hhbmdlIG9iamVjdCBmcm9tIHRoZSBzdGFuZGFyZCB0b29sYm93IG9udG8gdGhlIHNpbXVsYXRpb24gYXQgdGhlIHNhbWUgbGV2ZWwgYXMgeW91ciBtZXQgZmlsZS4gIFRoZSBjbGltYXRlIGNoYW5nZSB1c2VyIGludGVyZmFjZSB3aWxsIGFsbG93IHlvdSB0byBlbnRlciBzaW1wbGUgbW9kaWZpZXJzIChlaXRoZXIgYWRkaXRpdmUgb3IgbXVsdGlwbGljYXRpdmUpIGZvciBtYXhpbXVtIGFuZCBtaW5pbXVtIHRlbXBlcmF0dXJlLCBzb2xhciByYWRpYXRpb24gYW5kIHJhaW5mYWxsLlxwYXINClxwYXINCn0NCg==</memo>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1989</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Wheat Simulation with Climate Change.sum</filename>
    </summaryfile>
    <climatechange>
      <maxtmodifier description="Change in maximum temperature in degrees celsius">1</maxtmodifier>
      <mintmodifier description="Change in minimum temperature in degrees celsius">1</mintmodifier>
      <rainmodifier description="Relative change in rainfall">0.9</rainmodifier>
      <radiationmodifier description="Relative change in radiation">1.0</radiationmodifier>
      <co2 description="Atmospheric C02 concentration (ppm)">400</co2>
    </climatechange>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Sowing rule">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing], crop_class = [class]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">200</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">100</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">hartog</cultivar>
            <class type="classes" croppropertyname="crop" description="Enter crop growth class : ">plant</class>
            <row_spacing type="text" description="Enter row spacing (mm) : ">250</row_spacing>
          </category>
        </rule>
        <rule name="Harvesting rule">
          <condition name="end_of_day">

           if [crop].stage_name = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
           endif

            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">wheat</crop>
          </category>
        </rule>
        <rule name="Sowing fertiliser">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="On which module should the event come from : ">wheat</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">sowing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">1000.</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <wheat />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="wheat.biomass" description="Biomass" array="?" units="kg/ha" />
          <variable name="wheat.yield" description="Yield" array="?" units="kg/ha" />
          <variable name="wheat.grain_protein" description="grain protein content" array="?" units="%" />
          <variable name="wheat.grain_size" description="Size of each grain" array="?" units="g" />
          <variable name="esw" array="?" description="Extractable Soil Water (mm)" VariableType="Water" />
        </variables>
        <events name="Reporting Frequency">
          <event name="wheat.harvesting" description="" />
        </events>
      </outputfile>
      <soil name="Jimbour,Waco (#016)">
        <Site>Jimbour</Site>
        <Region>South East Queensland</Region>
        <LocalName>Waco</LocalName>
        <SoilType>Black Vertosol</SoilType>
        <NearestTown>Jimbour, Q 4352</NearestTown>
        <NaturalVegetation>Grassland, mainly Qld bluegrass</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.15</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1.04</oc>
            <ph>8.4</ph>
            <fbiom>0.025</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <ec>0.2</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.03</bd>
            <ll15>0.29</ll15>
            <airdry>0.26</airdry>
            <dul>0.53</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>8.8</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.25</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.31</ec>
            <ll name="Barley">0.32</ll>
            <kl name="Barley">0.08</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.36</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.39</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.35</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="Barley">0.38</ll>
            <kl name="Barley">0.06</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.43</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.08</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.38</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.06</bd>
            <ll15>0.3</ll15>
            <airdry>0.3</airdry>
            <dul>0.52</dul>
            <sat>0.57</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.77</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.59</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.04</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.51</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.3</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.37</ll>
            <kl name="Maize">0.06</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.09</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.35</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.11</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.45</oc>
            <ph>9.1</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.84</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.02</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.31</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.4</ll>
            <kl name="Maize">0.04</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.07</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.12</bd>
            <ll15>0.32</ll15>
            <airdry>0.32</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.27</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.93</ec>
            <ll name="Barley">0.41</ll>
            <kl name="Barley">0.01</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.32</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.42</ll>
            <kl name="Maize">0.02</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.05</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.41</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.15</bd>
            <ll15>0.33</ll15>
            <airdry>0.33</airdry>
            <dul>0.48</dul>
            <sat>0.53</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.22</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.48</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.48</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.33</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.48</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.48</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.48</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.18</bd>
            <ll15>0.34</ll15>
            <airdry>0.34</airdry>
            <dul>0.47</dul>
            <sat>0.52</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.16</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.06</ec>
            <ll name="Barley">0.47</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.47</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.34</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.47</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.47</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.47</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.35</ll15>
            <airdry>0.35</airdry>
            <dul>0.46</dul>
            <sat>0.51</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.13</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.05</ec>
            <ll name="Barley">0.46</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.46</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.35</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.46</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.46</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.46</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.25</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.44</dul>
            <sat>0.49</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.12</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.44</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.44</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.36</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.44</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.42</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.44</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.44</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.503</no3>
              <nh4>0.599</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Continuous Sorghum Simulation">
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1989</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Sorghum Simulation.sum</filename>
    </summaryfile>
    <area name="paddock">
      <registrations name="global" />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="sorghum.biomass" description="Biomass" array="?" units="kg/ha" />
          <variable name="sorghum.yield" description="Yield" array="?" units="kg/ha" />
          <variable name="esw" array="?" description="Extractable Soil Water (mm)" VariableType="Water" />
        </variables>
        <events name="Reporting Frequency">
          <event name="sorghum.harvesting" description="" />
        </events>
      </outputfile>
      <manager name="Manager">
        <rule name="Sorghum Sowing rule">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing], skip = [skiprow]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-oct</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jan</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">200</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">sorghum</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">7</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">early</cultivar>
            <row_spacing type="text" description="Enter row spacing (mm) : ">1000</row_spacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
        </rule>
        <rule name="Harvesting rule">
          <condition name="end_of_day">

           if [crop].stage_name = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
           endif

            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">sorghum</crop>
          </category>
        </rule>
        <rule name="Sowing fertiliser">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="On which module should the event come from : ">sorghum</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">sowing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">1000.</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <sorghum />
      <soil name="Jimbour,Waco (#16)">
        <Site>Jimbour</Site>
        <Region>South East Queensland</Region>
        <LocalName>Waco</LocalName>
        <SoilType>Black Vertosol</SoilType>
        <NearestTown>Jimbour, Q 4352</NearestTown>
        <NaturalVegetation>Grassland, mainly Qld bluegrass</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.145</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1.04</oc>
            <ph>8.4</ph>
            <fbiom>0.025</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <ec>0.2</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.03</bd>
            <ll15>0.29</ll15>
            <airdry>0.26</airdry>
            <dul>0.53</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>8.8</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.25</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.31</ec>
            <ll name="Barley">0.32</ll>
            <kl name="Barley">0.08</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.36</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.39</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.35</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="Barley">0.38</ll>
            <kl name="Barley">0.06</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.43</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.08</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.38</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.06</bd>
            <ll15>0.3</ll15>
            <airdry>0.3</airdry>
            <dul>0.52</dul>
            <sat>0.57</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.77</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.59</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.04</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.51</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.3</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.37</ll>
            <kl name="Maize">0.06</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.09</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.35</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.11</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.45</oc>
            <ph>9.1</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.84</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.02</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.31</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.4</ll>
            <kl name="Maize">0.04</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.07</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.12</bd>
            <ll15>0.32</ll15>
            <airdry>0.32</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.27</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.93</ec>
            <ll name="Barley">0.41</ll>
            <kl name="Barley">0.01</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.32</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.42</ll>
            <kl name="Maize">0.02</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.05</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.41</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.15</bd>
            <ll15>0.33</ll15>
            <airdry>0.33</airdry>
            <dul>0.48</dul>
            <sat>0.53</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.22</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.48</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.48</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.33</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.48</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.48</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.48</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.18</bd>
            <ll15>0.34</ll15>
            <airdry>0.34</airdry>
            <dul>0.47</dul>
            <sat>0.52</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.16</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.06</ec>
            <ll name="Barley">0.47</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.47</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.34</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.47</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.47</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.47</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.35</ll15>
            <airdry>0.35</airdry>
            <dul>0.46</dul>
            <sat>0.51</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.13</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.05</ec>
            <ll name="Barley">0.46</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.46</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.35</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.46</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.46</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.46</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.25</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.44</dul>
            <sat>0.49</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.12</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.44</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.44</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.36</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.44</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.42</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.44</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.44</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.500</no3>
              <nh4>0.600</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Continuous Maize Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/06/1995</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">1/05/2000</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Maize Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\hre.met</filename>
    </metfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Harvesting rule for intercropping">
          <condition name="init">
          [crop]_to_harvest = 0
            </condition>
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            [crop] harvest, remove=[fraction_to_remove]
            [crop] kill_crop
            [crop] end_crop
                  crop_in = crop_in - 1
            [crop]_to_harvest = 0
            fert_tot = 0
            sow_year = 0
            if (crop_current = '[crop]') then
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current1 = '[crop]') then
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current2 = '[crop]') then
               crop_current2 = blank
            endif
         endif

         if ([crop].stage_name = 'harvest_ripe' OR [crop].plant_status = 'dead') then
            [crop]_to_harvest = 1
         endif
            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">maize</crop>
            <fraction_to_remove type="text" description="Enter fraction of stover to remove (not for maize): ">0.95</fraction_to_remove>
          </category>
        </rule>
        <rule name="Output at harvesting for intercropping">
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            '[outputfile]' do_output
         endif
            </condition>
          <category name="Output criteria">
            <crop type="crop" description="Enter name of crop to output at harvest : ">maize</crop>
            <outputfile type="modulename" description="Name of outputfile component : ">outputfile</outputfile>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">maize</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">sc401</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">sole</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">no</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">1-nov</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">30-dec</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">20</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">5</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">2.2</density>
            <depth description="Enter sowing depth  (mm)">100</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">0.9</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">27</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">25</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">50</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Zimbabwe Fertile Luvisol (187mm PAWC)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Remove all residues on a fixed date">
          <condition name="start_of_day">
         if today = date('[date]') then
            '[surfaceommodule]' tillage type = user_defined, f_incorp = 1.0 (), tillage_depth = 0.0 ()
         endif
            </condition>
          <category name="Removal criteria">
            <date description="Date to remove residues (dd-mmm) :" type="ddmmmdate">1-may</date>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
          </category>
        </rule>
      </manager>
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type description="Organic Matter type">wheat</type>
        <mass description="Initial surface residue (kg/ha)">0</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <fertiliser name="Fertiliser" />
      <outputfile name="outputfile">
        <filename name="filename">Continuous Maize Simulation.out</filename>
        <variables name="My Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="esw" description="Extractable Soil Water (mm)" VariableType="Water" array="?" />
          <variable name="day" description="Day" array="?" />
          <variable name="year" description="Year" array="?" />
          <variable name="maize.yield" description="Maize Yield (kg/ha)" array="?" />
          <variable name="maize.stover" description="Maize Stover (kg/ha)" array="?" />
          <variable name="maize.biomass" description="Maize Total Above Ground Biomass (kg/ha)" array="?" />
        </variables>
        <events name="My Variables Events" />
      </outputfile>
      <maize />
      <soil name="Zimbabwe Fertile Luvisol (187mm PAWC)">
        <profile>
          <layer>
            <thickness>100</thickness>
            <ll15>0.11</ll15>
            <airdry>0.04</airdry>
            <dul>0.22</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.11</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.11</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.11</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.11</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.11</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.11</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.11</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1.2</oc>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.14</ll15>
            <airdry>0.14</airdry>
            <dul>0.25</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.14</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.14</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.14</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.14</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.14</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.14</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.14</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1</oc>
            <fbiom>0.01</fbiom>
            <finert>0.65</finert>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.16</ll15>
            <airdry>0.15</airdry>
            <dul>0.27</dul>
            <sat>0.32</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.16</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.16</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.16</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.16</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.16</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.16</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.16</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>0.86</oc>
            <fbiom>0.01</fbiom>
            <finert>0.7</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.17</ll15>
            <airdry>0.16</airdry>
            <dul>0.28</dul>
            <sat>0.33</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6.2</ph>
            <oc>0.83</oc>
            <fbiom>0.01</fbiom>
            <finert>0.75</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.19</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.34</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.19</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.19</ll>
            <kl name="cowpea">0.06</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.19</ll>
            <kl name="maize">0.06</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.19</ll>
            <kl name="mucuna">0.06</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.19</ll>
            <kl name="peanut">0.06</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.19</ll>
            <kl name="pigeonp">0.06</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.19</ll>
            <kl name="soybean">0.06</kl>
            <xf name="soybean">1</xf>
            <ph>6.5</ph>
            <oc>0.58</oc>
            <fbiom>0.01</fbiom>
            <finert>0.8</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.35</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.04</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.04</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.04</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.04</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.04</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.04</kl>
            <xf name="soybean">1</xf>
            <ph>6.7</ph>
            <oc>0.54</oc>
            <fbiom>0.01</fbiom>
            <finert>0.85</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.36</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.03</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.03</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.03</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.03</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.03</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.03</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.47</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.32</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.02</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.02</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.02</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.02</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.02</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.02</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
          </layer>
        </profile>
        <Cona>2.5</Cona>
        <U>9</U>
        <CN2Bare>75</CN2Bare>
        <Salb>0.13</Salb>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <CNRed>20</CNRed>
        <CNCov>0.8</CNCov>
        <RootCN>45</RootCN>
        <RootWT>1000</RootWT>
        <SoilCN>14.5</SoilCN>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>0.237</no3>
              <nh4>0.194</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.484</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.290</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.554</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.158</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.079</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
          </profile>
        </InitNitrogen>
        <InitWater>
          <PercentMethod>
            <Percent>0.00</Percent>
            <Distributed>Filled from top</Distributed>
          </PercentMethod>
        </InitWater>
      </soil>
    </area>
  </simulation>
  <simulation name="Continuous Maize and Weeds Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date" lbound="2/11/1961" ubound="31/01/2001">1/06/1995</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date" lbound="2/11/1961" ubound="31/01/2001">1/05/2000</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Maize and Weeds Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\hre.met</filename>
    </metfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Harvesting rule for intercropping">
          <condition name="init">
          [crop]_to_harvest = 0
            </condition>
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            [crop] harvest, remove=[fraction_to_remove]
            [crop] kill_crop
            [crop] end_crop
                  crop_in = crop_in - 1
            [crop]_to_harvest = 0
            fert_tot = 0
            sow_year = 0
            if (crop_current = '[crop]') then
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current1 = '[crop]') then
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current2 = '[crop]') then
               crop_current2 = blank
            endif
         endif

         if ([crop].stage_name = 'harvest_ripe' OR [crop].plant_status = 'dead') then
            [crop]_to_harvest = 1
         endif
            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">maize</crop>
            <fraction_to_remove type="text" description="Enter fraction of stover to remove (not for maize): ">0.95</fraction_to_remove>
          </category>
        </rule>
        <rule name="Output at harvesting for intercropping">
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            '[outputfile]' do_output
         endif
            </condition>
          <category name="Output criteria">
            <crop type="crop" description="Enter name of crop to output at harvest : ">maize</crop>
            <outputfile type="modulename" description="Name of outputfile component : ">outputfile</outputfile>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">maize</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">sc401</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">intercrop</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">yes</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">1-nov</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">30-dec</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">20</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">5</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">2.2</density>
            <depth description="Enter sowing depth  (mm)">100</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">0.9</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">27</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">30</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">0</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">Surface Organic Matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Zimbabwe Fertile Luvisol (187mm PAWC)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Sow WEEDS using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_fert_pre_sow = 0
         days_last_year = 365
         fert_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0

      </condition>
          <condition name="process"><![CDATA[
               if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then


                  if (today = date('[date2]')) then
                     if ('[rotation_exclude]' = 'no') then
                        ready_for_next = 1
                     endif
                  endif

                  if (wd_sow_opp_num > 0) then
                     wd_sow_opp_days = wd_sow_opp_days + 1
                  else
                  endif

                  if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
                      AND weed.plant_status = 'out')
                      AND days_after_weed_kill > 0) then
                        if (date_within('[date1], [date2]') = 1) then
                           crop_sow = 'waiting'
                           surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                           if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                                 (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                               ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                              if (wd_sow_opp_days >= [rain_days] OR wd_sow_opp_num = 0) then
                                 wd_sow_opp_num = wd_sow_opp_num + 1
                                 wd_sow_opp_days = 0
                              endif

                              if ((wd_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                                 if (date_within('[date1], [date_ch1]') = 1) then
                                    weed sow crop_class = [cla], plants = [density] (plants/m2), sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing]
                                 else
                                    weed sow crop_class = [cla], plants = [density] (plants/m2), sowing_depth = [depth], cultivar = [cultivar2], row_spacing = [row_spacing]
                                 endif
                                 crop_in = crop_in + 1
                                 if ('[rotation_exclude]' = 'no') then
                                    ready_for_next = 1
                                 endif
                                 crop_current2 = crop_current1
                                 crop_current1 = crop_current
                                 crop_current = '[crop]'
                                 crop_sow = '[crop]'
                              else
                                 !not this opportunity
                              endif
                        endif
                     endif
                  endif
               endif
                           ]]></condition>
          <condition name="end_of_day"><![CDATA[

               days_after_weed_kill = days_after_weed_kill + 1

               if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
                  !   Tillage - presowing seedbed preparation
                  if ( [till_days_pre_sow] > 0) then
                     ! calculate presowing tillage date
                     till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
                     ! Need to correct for possible year boundary condition
                     if (till_day_pre_sow < today) then
                        till_day_pre_sow = days_this_year + till_day_pre_sow
                     endif
                     if (today = till_day_pre_sow) then
                        ready_to_till_pre_sow = 1
                     endif
                     if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                        ! tillage
                        if (weed.plant_status <> 'out') then
                           weed harvest, remove=[fraction]
                           weed kill_crop
                           weed end_crop
                           crop_in = crop_in - 1
                          if (crop_current = 'weed') then
                              crop_current = crop_current1
                              crop_current1 = crop_current2
                              crop_current2 = blank
                           elseif (crop_current1 = 'weed') then
                              crop_current1 = crop_current2
                              crop_current2 = blank
                           elseif (crop_current2 = 'weed') then
                              crop_current2 = blank
                           endif
                        endif
                     endif
                  endif
               endif


               if (date_within('[date1], [date2]') = 1) THEN
               else
                  wd_sow_opp_num = 0
                  wd_sow_opp_days = 0
               endif

            ]]></condition>
          <category name="Crop properties">
            <crop type="crop" description="Name of this crop">weed</crop>
            <cultivar1 type="list" listvalues="late, early" description="Enter first type"> early</cultivar1>
            <cla type="list" listvalues="winter_grass, winter_dicot, summer_grass, perennial_legume" description="Enter class type "> summer_grass</cla>
            <date_ch1 type="ddmmmdate" description="Enter type change date (dd-mmm)">1-jul</date_ch1>
            <cultivar2 type="list" listvalues="late, early" description="Enter second type">late</cultivar2>
            <cropmethod type="list" listvalues="sole, intercrop" description="Method of cropping">intercrop</cropmethod>
            <rotation_exclude type="yesno" description="Exclude from rotation sequence">yes</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm)">01-oct</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm)">30-apr</date2>
            <must_sow type="yesno" description="Must Sow">no</must_sow>
            <rain_amount type="text" description="Enter amount of rainfall (mm)">10</rain_amount>
            <rain_days type="text" description="Enter number of days of rainfall (days)">5</rain_days>
            <esw_amount type="text" description="Enter amount of soil water (mm)">5</esw_amount>
            <sow_opp type="text" description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up type="text" description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low type="text" description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density type="text" description="Enter sowing density  (plants/m2)">5</density>
            <depth type="text" description="Enter sowing depth  (mm)">15</depth>
            <row_spacing type="text" description="Enter row spacing  (mm)">350</row_spacing>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow type="text" description="Enter number of days before window to prepare seed-bed (days)">0</till_days_pre_sow>
            <must_till type="yesno" description="Must Till">no</must_till>
            <tillage_type type="list" listvalues="user_defined, chisel, disc, planter,burn, burn_90, graze, scarifier, rip, blade, tine" description="Tillage type">disc</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm)">100</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1)">1</tillage_f_incorp>
            <fraction type="text" description="Enter biomass removal fraction of growing weeds from field (0-1)">0.0</fraction>
          </category>
        </rule>
        <rule name="Weeding at threshold weed biomass or maximum days">
          <condition name="init">
          daemerge = 0
      </condition>
          <condition name="end_of_day"><![CDATA[
         if ((crop_in >= 1)
            AND (weed.plant_status <> 'out')) then
            if (weed.stage >= 3.0) then
               daemerge = daemerge + 1
            endif

            if (weed.biomass > [weed_biomass] OR daemerge >= [weed_interval]) then
               if ((crop_in > 1 AND [weed_maxno_in] > weed_count_in) OR (crop_in = 1 AND [weed_maxno_out] > weed_count_out)) then
                  if (crop_in > 1) then
                     weed_count_in = weed_count_in + 1
                  elseif (crop_in = 1) then
                     weed_count_out = weed_count_out + 1
                  endif
                  weed harvest, remove = [fraction]
                  weed kill_crop plants_kill_fraction = [thin_fraction]
                  if ([thin_fraction] = 1.0) then
                     weed end_crop
                     days_after_weed_kill = 0
                 else
                  endif
                  '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [f_incorp], tillage_depth = [tillage_depth]
                  if ([thin_fraction] = 1.0) then
                    crop_in = crop_in - 1
                    if (crop_current = 'weed') then
                        crop_current = crop_current1
                        crop_current1 = crop_current2
                        crop_current2 = blank
                     elseif (crop_current1 = 'weed') then
                        crop_current1 = crop_current2
                        crop_current2 = blank
                     elseif (crop_current2 = 'weed') then
                        crop_current2 = blank
                     endif
                     daemerge = 0
                  else
                  endif
               else
               endif
            else
            endif
         else
            daemerge = 0
         endif

         if (((crop_in = 1)
            AND (weed.plant_status <> 'out'))
            OR (crop_in = 0)) then
            weed_count_in = 0
         else
            weed_count_out = 0
         endif
      ]]></condition>
          <category name="Weeding properties">
            <weed_interval description="Maximum days after emergence to weed (days) : " type="text">35</weed_interval>
            <weed_biomass description="Weeding biomass threshold to weed (kg/ha) : " type="text">5000</weed_biomass>
            <weed_maxno_in description="Maximum number of in-crop weedings (1..n) : " type="text">1</weed_maxno_in>
            <weed_maxno_out description="Maximum number of fallow weedings (1..n) : " type="text">0</weed_maxno_out>
            <thin_fraction description="Enter fraction of weed population weeded (0-1) : " type="text">1.0</thin_fraction>
            <fraction description="Enter biomass removal fraction from field (0-1) : " type="text">0.0</fraction>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">Surface Organic Matter</surfaceommodule>
            <tillage_type description="Enter name of tillage type : " type="text">user_defined</tillage_type>
            <f_incorp description="Enter fraction of surface residues incorporated into soil (0-1) : " type="text">0.1</f_incorp>
            <tillage_depth description="Enter depth of incorporation of surface residues (mm) : " type="text">25</tillage_depth>
          </category>
        </rule>
        <rule name="Remove all residues on a fixed date">
          <condition name="start_of_day">
         if today = date('[date]') then
            '[surfaceommodule]' tillage type = user_defined, f_incorp = 1.0 (), tillage_depth = 0.0 ()
         endif
            </condition>
          <category name="Removal criteria">
            <date description="Date to remove residues (dd-mmm) :" type="ddmmmdate">8-may</date>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">Surface Organic Matter</surfaceommodule>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="Surface Organic Matter">
        <PoolName description="Organic Matter pool name">wheat_stubble</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">0</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <cpr description="C:P ratio of initial residue (optional)" />
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <outputfile name="outputfile">
        <filename name="filename">Continuous Maize and Weeds Simulation.out</filename>
        <variables name="My Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="Zimbabwe Fertile Luvisol (187mm PAWC) Water.esw" description="Extractable Soil Water (mm)" array="?" />
          <variable name="day" description="Day" array="?" />
          <variable name="year" description="Year" array="?" />
          <variable name="maize.yield" description="Maize Yield (kg/ha)" array="?" />
          <variable name="maize.stover" description="Maize Stover (kg/ha)" array="?" />
          <variable name="maize.biomass" description="Maize Total Above Ground Biomass (kg/ha)" array="?" />
          <variable name="weed.biomass" description="Biomass" array="No" />
        </variables>
        <events name="My Variables Events" />
      </outputfile>
      <maize />
      <weed />
      <canopy name="Canopy">
        <intercrop name="intercrop" description="Enter crop names to intercrop" type="text">maize weed</intercrop>
      </canopy>
      <soil name="Zimbabwe Fertile Luvisol (187mm PAWC)">
        <profile>
          <layer>
            <thickness>100</thickness>
            <ll15>0.11</ll15>
            <airdry>0.04</airdry>
            <dul>0.22</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.11</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.11</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.11</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.11</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.11</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.11</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.11</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1.2</oc>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <ll name="weed">0.11</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.14</ll15>
            <airdry>0.14</airdry>
            <dul>0.25</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.14</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.14</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.14</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.14</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.14</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.14</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.14</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1</oc>
            <fbiom>0.01</fbiom>
            <finert>0.65</finert>
            <ll name="weed">0.14</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.16</ll15>
            <airdry>0.15</airdry>
            <dul>0.27</dul>
            <sat>0.32</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.16</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.16</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.16</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.16</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.16</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.16</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.16</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>0.86</oc>
            <fbiom>0.01</fbiom>
            <finert>0.7</finert>
            <ll name="weed">0.16</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.17</ll15>
            <airdry>0.16</airdry>
            <dul>0.28</dul>
            <sat>0.33</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6.2</ph>
            <oc>0.83</oc>
            <fbiom>0.01</fbiom>
            <finert>0.75</finert>
            <ll name="weed">0.17</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.19</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.34</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.19</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.19</ll>
            <kl name="cowpea">0.06</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.19</ll>
            <kl name="maize">0.06</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.19</ll>
            <kl name="mucuna">0.06</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.19</ll>
            <kl name="peanut">0.06</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.19</ll>
            <kl name="pigeonp">0.06</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.19</ll>
            <kl name="soybean">0.06</kl>
            <xf name="soybean">1</xf>
            <ph>6.5</ph>
            <oc>0.58</oc>
            <fbiom>0.01</fbiom>
            <finert>0.8</finert>
            <ll name="weed">0.19</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.35</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.04</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.04</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.04</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.04</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.04</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.04</kl>
            <xf name="soybean">1</xf>
            <ph>6.7</ph>
            <oc>0.54</oc>
            <fbiom>0.01</fbiom>
            <finert>0.85</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.36</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.03</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.03</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.03</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.03</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.03</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.03</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.47</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.32</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.02</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.02</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.02</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.02</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.02</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.02</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
        </profile>
        <Cona>2.5</Cona>
        <U>9</U>
        <CN2Bare>75</CN2Bare>
        <Salb>0.13</Salb>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <CNRed>20</CNRed>
        <CNCov>0.8</CNCov>
        <RootCN>45</RootCN>
        <RootWT>1000</RootWT>
        <SoilCN>14.5</SoilCN>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>0.237</no3>
              <nh4>0.194</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.484</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.290</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.554</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.158</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.079</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
          </profile>
        </InitNitrogen>
        <InitWater>
          <PercentMethod>
            <Percent>0.00</Percent>
            <Distributed>Filled from top</Distributed>
          </PercentMethod>
        </InitWater>
        <WaterFormat>VolumetricPercent</WaterFormat>
      </soil>
    </area>
  </simulation>
  <simulation name="Continuous Maize Bimodal Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/06/1995</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">1/05/2000</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Maize Bimodal Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\hre.met</filename>
    </metfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Harvesting rule for intercropping">
          <condition name="init">
          [crop]_to_harvest = 0
            </condition>
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            [crop] harvest, remove=[fraction_to_remove]
            [crop] kill_crop
            [crop] end_crop
                  crop_in = crop_in - 1
            [crop]_to_harvest = 0
            fert_tot = 0
            sow_year = 0
            if (crop_current = '[crop]') then
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current1 = '[crop]') then
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current2 = '[crop]') then
               crop_current2 = blank
            endif
         endif

         if ([crop].stage_name = 'harvest_ripe' OR [crop].plant_status = 'dead') then
            [crop]_to_harvest = 1
         endif
            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">maize</crop>
            <fraction_to_remove type="text" description="Enter fraction of stover to remove (not for maize): ">0.95</fraction_to_remove>
          </category>
        </rule>
        <rule name="Output at harvesting for intercropping">
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            '[outputfile]' do_output
         endif
            </condition>
          <category name="Output criteria">
            <crop type="crop" description="Enter name of crop to output at harvest : ">maize</crop>
            <outputfile type="modulename" description="Name of outputfile component : ">outputfile</outputfile>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">maize</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">katumani</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">sole</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">no</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">10-mar</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">01-may</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">40</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">8</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">2</density>
            <depth description="Enter sowing depth  (mm)">30</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">1</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">0</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">30</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">0</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Chromic Luvisol, Katumani Research Station (PAWC = 164mm)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping{2}">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">maize</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">katumani</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">sole</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">no</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">10-oct</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">20-nov</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">40</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">8</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">2</density>
            <depth description="Enter sowing depth  (mm)">30</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">1</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">27</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">30</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">0</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Chromic Luvisol, Katumani Research Station (PAWC = 164mm)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Remove all residues on a fixed date">
          <condition name="start_of_day">
         if today = date('[date]') then
            '[surfaceommodule]' tillage type = user_defined, f_incorp = 1.0 (), tillage_depth = 0.0 ()
         endif
            </condition>
          <category name="Removal criteria">
            <date description="Date to remove residues (dd-mmm) :" type="ddmmmdate">1-sep</date>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
          </category>
        </rule>
        <rule name="Remove all residues on a fixed date{2}">
          <condition name="start_of_day">
         if today = date('[date]') then
            '[surfaceommodule]' tillage type = user_defined, f_incorp = 1.0 (), tillage_depth = 0.0 ()
         endif
            </condition>
          <category name="Removal criteria">
            <date description="Date to remove residues (dd-mmm) :" type="ddmmmdate">1-may</date>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type description="Organic Matter type">wheat</type>
        <mass description="Initial surface residue (kg/ha)">0</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <outputfile name="outputfile">
        <filename name="filename">Continuous Maize Bimodal Simulation.out</filename>
        <variables name="My Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="Chromic Luvisol, Katumani Research Station (PAWC = 164mm) Water.esw" description="Extractable Soil Water (mm)" array="?" />
          <variable name="day" description="Day" array="?" />
          <variable name="year" description="Year" array="?" />
          <variable name="maize.yield" description="Maize Yield (kg/ha)" array="?" />
          <variable name="maize.stover" description="Maize Stover (kg/ha)" array="?" />
          <variable name="maize.biomass" description="Maize Total Above Ground Biomass (kg/ha)" array="?" />
          <variable name="maize.swdef_expan" description="Maize soil water factor for expansion" array="?" />
          <variable name="maize.swdef_photo" description="Maize soil water factor for photosynthesis" array="?" />
          <variable name="maize.nfact_expan" description="Maize Nitrogen factor for expansion" array="?" />
          <variable name="maize.nfact_photo" description="Maize Nitrogen factor for photosynthesis" array="?" />
          <variable name="maize.grain_no" description="Maize Grain number (g/m2)" array="?" />
          <variable name="Chromic Luvisol, Katumani Research Station (PAWC = 164mm) Nitrogen.no3()" description="NO3 - layered (kg/ha)" array="?" />
        </variables>
        <events name="My Variables Events" />
      </outputfile>
      <maize />
      <soil name="Chromic Luvisol, Katumani Research Station (PAWC = 164mm)">
        <profile>
          <layer>
            <thickness>150</thickness>
            <ll15>0.15</ll15>
            <airdry>0.11</airdry>
            <dul>0.28</dul>
            <sat>0.32</sat>
            <swcon>0.5</swcon>
            <bd>1.28</bd>
            <ll name="sorg">0.15</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.15</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.15</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.15</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.15</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.15</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.15</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>0.92</oc>
            <fbiom>0.02</fbiom>
            <finert>0.5</finert>
          </layer>
          <layer>
            <thickness>150</thickness>
            <ll15>0.15</ll15>
            <airdry>0.12</airdry>
            <dul>0.28</dul>
            <sat>0.32</sat>
            <swcon>0.5</swcon>
            <bd>1.27</bd>
            <ll name="sorg">0.15</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.15</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.15</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.15</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.15</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.15</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.15</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>0.77</oc>
            <fbiom>0.015</fbiom>
            <finert>0.75</finert>
          </layer>
          <layer>
            <thickness>300</thickness>
            <ll15>0.17</ll15>
            <airdry>0.17</airdry>
            <dul>0.285</dul>
            <sat>0.34</sat>
            <swcon>0.5</swcon>
            <bd>1.34</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6.2</ph>
            <oc>0.57</oc>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
          </layer>
          <layer>
            <thickness>300</thickness>
            <ll15>0.17</ll15>
            <airdry>0.17</airdry>
            <dul>0.27</dul>
            <sat>0.33</sat>
            <swcon>0.3</swcon>
            <bd>1.33</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6.4</ph>
            <oc>0.46</oc>
            <fbiom>0.01</fbiom>
            <finert>0.99</finert>
          </layer>
          <layer>
            <thickness>300</thickness>
            <ll15>0.17</ll15>
            <airdry>0.17</airdry>
            <dul>0.27</dul>
            <sat>0.33</sat>
            <swcon>0.3</swcon>
            <bd>1.31</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.06</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.06</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.06</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.06</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.06</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.06</kl>
            <xf name="soybean">1</xf>
            <ph>6.5</ph>
            <oc>0.43</oc>
            <fbiom>0.01</fbiom>
            <finert>0.99</finert>
          </layer>
          <layer>
            <thickness>300</thickness>
            <ll15>0.17</ll15>
            <airdry>0.17</airdry>
            <dul>0.27</dul>
            <sat>0.33</sat>
            <swcon>0.3</swcon>
            <bd>1.31</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.04</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.04</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.04</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.04</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.04</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.04</kl>
            <xf name="soybean">1</xf>
            <ph>6.5</ph>
            <oc>0.29</oc>
            <fbiom>0.01</fbiom>
            <finert>0.99</finert>
          </layer>
        </profile>
        <Cona>5</Cona>
        <U>5</U>
        <CN2Bare>80</CN2Bare>
        <Salb>0.13</Salb>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>32</DiffusSlope>
        <CNRed>20</CNRed>
        <CNCov>0.8</CNCov>
        <InitWater>
          <PercentMethod>
            <Percent>0.25</Percent>
            <Distributed>Filled from top</Distributed>
          </PercentMethod>
        </InitWater>
        <RootCN>45</RootCN>
        <RootWT>400</RootWT>
        <SoilCN>10</SoilCN>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>2</no3>
              <nh4>1</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>1</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>1</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.500</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.500</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.500</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
        <Phosphorus>
          <layer name="1">
            <LabileP>4</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>115</Sorption>
          </layer>
          <layer name="2">
            <LabileP>4</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>150</Sorption>
          </layer>
          <layer name="3">
            <LabileP>3</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>160</Sorption>
          </layer>
          <layer name="4">
            <LabileP>3</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>200</Sorption>
          </layer>
          <layer name="5">
            <LabileP>3</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>200</Sorption>
          </layer>
          <layer name="6">
            <LabileP>3</LabileP>
            <BandedP>0</BandedP>
            <RockP>0</RockP>
            <Sorption>200</Sorption>
          </layer>
          <ResidueCP>250</ResidueCP>
          <RootCP>200</RootCP>
          <RateDissolRock>0.2</RateDissolRock>
        </Phosphorus>
      </soil>
    </area>
  </simulation>
  <simulation name="Maize Legume and Weeds Rotation Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date" lbound="2/11/1961" ubound="31/01/2001">1/05/1991</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date" lbound="2/11/1961" ubound="31/01/2001">1/05/2000</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Rotation Maize_Legume and Weeds Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\hre.met</filename>
    </metfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Harvesting rule for intercropping">
          <condition name="init">
          [crop]_to_harvest = 0
            </condition>
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            [crop] harvest, remove=[fraction_to_remove]
            [crop] kill_crop
            [crop] end_crop
                  crop_in = crop_in - 1
            [crop]_to_harvest = 0
            fert_tot = 0
            sow_year = 0
            if (crop_current = '[crop]') then
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current1 = '[crop]') then
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current2 = '[crop]') then
               crop_current2 = blank
            endif
         endif

         if ([crop].stage_name = 'harvest_ripe' OR [crop].plant_status = 'dead') then
            [crop]_to_harvest = 1
         endif
            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">maize</crop>
            <fraction_to_remove type="text" description="Enter fraction of stover to remove (not for maize): ">0.95</fraction_to_remove>
          </category>
        </rule>
        <rule name="Output at harvesting for intercropping">
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            '[outputfile]' do_output
         endif
            </condition>
          <category name="Output criteria">
            <crop type="crop" description="Enter name of crop to output at harvest : ">maize</crop>
            <outputfile type="modulename" description="Name of outputfile component : ">outputfile</outputfile>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">maize</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">sc401</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">intercrop</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">no</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">1-nov</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">30-dec</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">20</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">5</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">2.2</density>
            <depth description="Enter sowing depth  (mm)">100</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">0.9</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">27</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">30</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">0</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Zimbabwe Fertile Luvisol (187mm PAWC)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Remove all residues on a fixed date">
          <condition name="start_of_day">
         if today = date('[date]') then
            '[surfaceommodule]' tillage type = user_defined, f_incorp = 1.0 (), tillage_depth = 0.0 ()
         endif
            </condition>
          <category name="Removal criteria">
            <date description="Date to remove residues (dd-mmm) :" type="ddmmmdate">08-may</date>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
          </category>
        </rule>
        <rule name="Sow using a variable rule with intercropping{2}">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_manure_pre_sow = 0
         days_last_year = 365
         manure_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0
        </condition>
          <condition name="end_of_day">

         if (date_within('[date1], [date2]') = 1) THEN
         else
            wht_sow_opp_num = 0
            wht_sow_opp_days = 0
         endif
         </condition>
          <condition name="process"><![CDATA[

         if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
               !  Presowing  manure application

            if ([manure_amount_pre_sow] > 0) then
               !  calculate day to fertilise
               manure_day_pre_sow = date('[date1]') - [manure_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (manure_day_pre_sow < today) then
                  manure_day_pre_sow = days_this_year + manure_day_pre_sow
               endif
               if (today = manure_day_pre_sow) then
                  ready_to_manure_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_manure_pre_sow = 1) then
                        ! just put on a fixed amount of manure
                  '[surfaceommodule_pre_sow]' add_surfaceom type=[manure_type_pre_sow], name=[manure_type_pre_sow], mass=[manure_amount_pre_sow], cnr=[manure_cnr_pre_sow], cpr=[manure_cpr_pre_sow]
                  ready_to_manure_pre_sow = 0
                  manure_day_pre_sow = 0
               endif
            endif

               !  Presowing  fertiliser application

            if ([fert_amount_pre_sow] > 0 OR [totn_pre_sow] > 0 ) then
               !  calculate day to fertilise
               fert_day_pre_sow = date('[date1]') - [fert_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (fert_day_pre_sow < today) then
                  fert_day_pre_sow = days_this_year + fert_day_pre_sow
               endif
               if (today = fert_day_pre_sow) then
                  ready_to_fert_pre_sow = 1
               endif
               if (crop_in = 0 and ready_to_fert_pre_sow = 1) then
                  if ([totn_pre_sow] > 0) then
                     !   Top up soil N of top 3 layers
                     N_deficit = [totn_pre_sow] - (no3(1) + nh4(1) + no3(2) + nh4(2) + no3(3) + nh4(3))
                     if (N_deficit < 0) then
                        ! do nothing
                        N_deficit = 0
                     else
                        fertiliser apply amount = N_deficit (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  else
                     N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
                     if (N_topsoil > [fert_criteria_pre_sow]) then
                        ! enough N already in topsoil
                     else
                        ! just put on a fixed amount of N
                        fertiliser apply amount = [fert_amount_pre_sow] (kg/ha), depth = 50 (mm), type = [fert_type_pre_sow] ()
                     endif
                  endif
                  ready_to_fert_pre_sow = 0
                  fert_day_pre_sow = 0
               endif
            endif

            !   Tillage - presowing seedbed preparation
            if ( [till_days_pre_sow] > 0) then
               ! calculate presowing tillage date
               till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
               ! Need to correct for possible year boundary condition
               if (till_day_pre_sow < today) then
                  till_day_pre_sow = days_this_year + till_day_pre_sow
               endif
               if (today = till_day_pre_sow) then
                  ready_to_till_pre_sow = 1
               endif
               if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                  ! tillage
                if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                  if (weed.plant_status <> 'out') then
                        weed harvest, remove=[fraction]
                        weed kill_crop
                        weed end_crop
                        days_after_weed_kill = 0
                       crop_in = crop_in - 1
                       if (crop_current = 'weed') then
                           crop_current = crop_current1
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current1 = 'weed') then
                           crop_current1 = crop_current2
                           crop_current2 = blank
                        elseif (crop_current2 = 'weed') then
                           crop_current2 = blank
                        endif
                  endif
                 endif
                  if ('[tillage_type]' = 'user_defined') then
                      '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
                      '[soilmodule] Water' type = [tillage_type], cn_red = [tillage_cn_red], cn_rain = [tillage_cn_rain]
                  else
                      '[surfaceommodule]' tillage type = [tillage_type] ()
                      '[soilmodule] Water' type = [planter_type]
                  endif
                  ready_to_till_pre_sow = 0
                  till_day_pre_sow = 0
               endif
            endif

            if (today = date('[date2]')) then
               if ('[rotation_exclude]' = 'no') then
                  ready_for_next = 1
               endif
            endif

            if (wht_sow_opp_num > 0) then
               wht_sow_opp_days = wht_sow_opp_days + 1
            else
            endif

         if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
             AND [crop].plant_status = 'out')) then
               if (date_within('[date1], [date2]') = 1) then
                  crop_sow = 'waiting'
                  surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                  if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                        (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                      ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                     if (wht_sow_opp_days >= [rain_days] OR wht_sow_opp_num = 0) then
                        wht_sow_opp_num = wht_sow_opp_num + 1
                        wht_sow_opp_days = 0
                     endif

                     if ((wht_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                        if ('[crop]' = 'sorghum') then
                           [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing], tiller_no_fertile = [ftn] (), skip = [skiprow]
                        else
                          [crop] sow cultivar = [cultivar1], plants = [density] (plants/m2), sowing_depth = [depth], row_spacing = [row_spacing]
                        endif
                        crop_in = crop_in + 1
                        if ('[rotation_exclude]' = 'no') then
                           ready_for_next = 1
                        endif
                        crop_current2 = crop_current1
                        crop_current1 = crop_current
                        crop_current = '[crop]'
                        crop_sow = '[crop]'
                        ready_to_manure_pre_sow = 0
                        if ([fert_amount_sow] > 0) then
                           fertiliser apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow] ()
                        endif
                        !   Planter -
                        ! Planting
                        if (crop_current = 'weed' or crop_current1 = 'weed' or crop_current2 = 'weed') then
                           if (weed.plant_status <> 'out' AND [thin_fraction] > 0) then
                              weed kill_crop plants_kill_fraction = [thin_fraction]
                              if ([thin_fraction] = 1.0) then
                                 weed end_crop
                                 days_after_weed_kill = 0
                              else
                              endif
                              if ([thin_fraction] = 1.0) then
                                    crop_in = crop_in - 1
                                   if (crop_current = 'weed') then
                                       crop_current = crop_current1
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current1 = 'weed') then
                                       crop_current1 = crop_current2
                                       crop_current2 = blank
                                    elseif (crop_current2 = 'weed') then
                                       crop_current2 = blank
                                    endif
                              endif
                           endif
                        endif
                        if ('[planter_type]' = 'user_defined') then
                            '[surfaceommodule]' tillage type = [planter_type], f_incorp = [planter_f_incorp] (), tillage_depth = [planter_depth]
                            '[soilmodule] Water' type = [planter_type], cn_red = [planter_cn_red], cn_rain = [planter_cn_rain]
                        else
                            '[surfaceommodule]' tillage type = [planter_type] ()
                            '[soilmodule] Water' type = [planter_type]
                        endif


                     else
                        !not this opportunity
                     endif
                  endif
               endif
            endif
         endif
         ! apply topdress fertiliser
         if ([fert_amount_TopDress] > 0.0) then
            if ([crop].das = [fert_days_TopDress]) then
               fertiliser apply amount = [fert_amount_TopDress] (kg/ha), depth = 50 (mm), type = [fert_type_TopDress] ()
            else
            endif
         else
         endif
         ]]></condition>
          <category name="Crop properties">
            <crop description="Name of this crop" type="crop">peanut</crop>
            <cultivar1 type="cultivars" croppropertyname="crop" description="Enter cultivar : ">early_bunch</cultivar1>
            <cropmethod description="Method of cropping" type="list" listvalues="sole,intercrop">intercrop</cropmethod>
            <rotation_exclude description="Exclude from rotation sequence" type="yesno">no</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 description="Enter sowing window START date (dd-mmm)" type="ddmmmdate">1-nov</date1>
            <date2 description="Enter sowing window END date (dd-mmm)" type="ddmmmdate">30-dec</date2>
            <must_sow description="Must Sow" type="yesno">no</must_sow>
            <rain_amount description="Enter amount of cumulative rainfall (mm)">30</rain_amount>
            <rain_days description="Enter number of days to accumulate rainfall (days)">5</rain_days>
            <esw_amount description="Enter amount of soil water (mm)">30</esw_amount>
            <sow_opp description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density description="Enter sowing density  (plants/m2)">11.1</density>
            <depth description="Enter sowing depth  (mm)">100</depth>
            <row_spacing description="Enter row spacing  (mm) (m for maize and sorghum)" type="text">450</row_spacing>
          </category>
          <category name="Sorghum specs">
            <ftn type="text" description="Enter Fertile Tiller No. : ">1</ftn>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row : ">solid</skiprow>
          </category>
          <category name="Starter fertiliser application">
            <fert_amount_sow description="Amount of starter fertiliser at sowing (kg/ha)" type="text">0</fert_amount_sow>
            <fert_type_sow description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea">urea_N</fert_type_sow>
          </category>
          <category name="TopDress fertiliser application">
            <fert_days_TopDress description="Enter number of days after sowing to apply top-dress fertiliser (days)" type="text">35</fert_days_TopDress>
            <fert_amount_TopDress description="Amount of TopDress fertiliser (kg/ha)" type="text">0</fert_amount_TopDress>
            <fert_type_TopDress description="Type" type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea"> NH4NO3</fert_type_TopDress>
          </category>
          <category name="Pre-sowing manure application">
            <surfaceommodule_pre_sow type="modulename" moduletype="surfaceom" description="Module used to apply the manure : ">Surface Organic Matter</surfaceommodule_pre_sow>
            <manure_days_pre_sow description="Enter number of days before window to apply pre-crop manure (days)" type="text">30</manure_days_pre_sow>
            <manure_amount_pre_sow type="text" description="Amount of manure to apply (kg/ha) : ">0</manure_amount_pre_sow>
            <manure_type_pre_sow type="list" listvalues="manure,fym,heap_uncov,heap_cov,pit,communal" description="manure type : ">manure</manure_type_pre_sow>
            <manure_cnr_pre_sow type="text" description="manure CNR : ">25</manure_cnr_pre_sow>
            <manure_cpr_pre_sow type="text" description="manure CPR : ">50</manure_cpr_pre_sow>
          </category>
          <category name="Pre-sowing fertiliser application">
            <fert_days_pre_sow description="Enter number of days before window to apply pre-crop fertiliser (days)" type="text">30</fert_days_pre_sow>
            <fert_amount_pre_sow description="Amount of pre-crop fertiliser (kg/ha)" type="text">0</fert_amount_pre_sow>
            <fert_criteria_pre_sow description="Don't add fertiliser if pre-crop N in top 2 layers exceeds (kg/ha)" type="text">1000</fert_criteria_pre_sow>
            <totn_pre_sow description=" OR  Amount of pre-crop N required in top 3 layers (kg/ha)" type="text">0</totn_pre_sow>
            <fert_type_pre_sow description="Type (NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea)" type="text">urea_N</fert_type_pre_sow>
          </category>
          <category name="Tillage components">
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <soilmodule type="modulename" description="Name of your soil module : ">Zimbabwe Fertile Luvisol (187mm PAWC)</soilmodule>
          </category>
          <category name="Planter Tillage">
            <planter_type description="Planter type" type="list" listvalues="user_defined, planter">user_defined</planter_type>
            <planter_depth description="User_defined depth of seedbed preparation (mm)" type="text">150</planter_depth>
            <thin_fraction description="Enter fraction of weed population killed (0-1)" type="text">1.0</thin_fraction>
            <planter_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</planter_f_incorp>
            <planter_cn_red description="cn reduction after tillage () : ">0</planter_cn_red>
            <planter_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</planter_cn_rain>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow description="Enter number of days before window to prepare seed-bed (days)" type="text">0</till_days_pre_sow>
            <must_till description="Must Till (yes/no)" type="yesno">no</must_till>
            <tillage_type description="Tillage type (user_defined, chisel, disc, planter)" type="list" listvalues="user_defined,chisel,disc,planter,burn,burn_90,graze,scarifier,rip,blade,tine">disc</tillage_type>
            <tillage_depth description="User_defined depth of seedbed preparation (mm)" type="text">100</tillage_depth>
            <tillage_f_incorp description="User_defined fraction of surface residues to incorporate (0-1)" type="text">1</tillage_f_incorp>
            <fraction description="Enter biomass removal fraction of growing weeds from field (0-1)" type="text">0.0</fraction>
            <tillage_cn_red description="cn reduction after tillage () : ">0</tillage_cn_red>
            <tillage_cn_rain description="amount of cummulative rain to dissipate tillage effects on cn () : ">0</tillage_cn_rain>
          </category>
        </rule>
        <rule name="Harvesting rule for intercropping{2}">
          <condition name="init">
          [crop]_to_harvest = 0
            </condition>
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            [crop] harvest, remove=[fraction_to_remove]
            [crop] kill_crop
            [crop] end_crop
                  crop_in = crop_in - 1
            [crop]_to_harvest = 0
            fert_tot = 0
            sow_year = 0
            if (crop_current = '[crop]') then
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current1 = '[crop]') then
               crop_current1 = crop_current2
               crop_current2 = blank
            elseif (crop_current2 = '[crop]') then
               crop_current2 = blank
            endif
         endif

         if ([crop].stage_name = 'harvest_ripe' OR [crop].plant_status = 'dead') then
            [crop]_to_harvest = 1
         endif
            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">peanut</crop>
            <fraction_to_remove type="text" description="Enter fraction of stover to remove (not for maize): ">0.95</fraction_to_remove>
          </category>
        </rule>
        <rule name="Output at harvesting for intercropping{2}">
          <condition name="end_of_day">
         if ([crop]_to_harvest = 1) then
            '[outputfile]' do_output
         endif
            </condition>
          <category name="Output criteria">
            <crop type="crop" description="Enter name of crop to output at harvest : ">peanut</crop>
            <outputfile type="modulename" description="Name of outputfile component : ">outputfile</outputfile>
          </category>
        </rule>
        <rule name="Rotations with Intercrop">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_fert_pre_sow = 0
         days_last_year = 365
         fert_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0

      </condition>
          <condition name="start_of_day">
         if (ready_for_next = 1) then
            if      (next = 1) THEN
               next_crop = '[crop01]'
               next = 2
            elseif      (next = 2) THEN
               next_crop = '[crop02]'
               next = 3
            elseif (next = 3) THEN
               next_crop = '[crop03]'
               next = 4
            elseif (next = 4) THEN
               next_crop = '[crop04]'
               next = 5
            elseif (next = 5) THEN
               next_crop = '[crop05]'
               next = 6
            elseif (next = 6) THEN
               next_crop = '[crop06]'
               next = 7
            elseif (next = 7) THEN
               next_crop = '[crop07]'
               next = 8
            elseif (next = 8) THEN
               next_crop = '[crop08]'
               next = 9
            elseif (next = 9) THEN
                  next_crop = '[crop09]'
                  next = 10
            elseif (next = 10) THEN
                  next_crop = '[crop10]'
                  next = 11
            elseif (next = 11) THEN
                  next_crop = '[crop11]'
                  next = 12
            elseif (next = 12) THEN
                  next_crop = '[crop12]'
                  next = 13
            elseif (next = 13) THEN
                  next_crop = '[crop13]'
                  next = 14
            elseif (next = 14) THEN
                  next_crop = '[crop14]'
                  next = 15
            elseif (next = 15) THEN
                  next_crop = '[crop15]'
                  next = 16
            elseif (next = 16) THEN
                  next_crop = '[crop16]'
                  next = 17
            elseif (next = 17) THEN
                  next_crop = '[crop17]'
                  next = 18
            elseif (next = 18) THEN
                  next_crop = '[crop18]'
                  next = 19
            elseif (next = 19) THEN
                  next_crop = '[crop19]'
                  next = 20
            elseif (next = 20) THEN
                  next_crop = '[crop20]'
                  next = 1
            endif
            if (next_crop = 'nil' OR next_crop = blank) THEN
               next_crop = '[crop01]'
               next = 2
            endif
            ready_for_next = 0
         endif

            ! treat fallow as a crop - its window starts when the other fallow finishes
            ! assume initiation (sowing) of fallow takes place when previous fallow finishes
            ! or when previous crop is harvested, whichever is the latest.
            ! Assume fallow finishes (harvested) at end of fallow date.

         if (next_crop = '[winterf_name]') then
               ! initiate (sow)
            if ((crop_in = 0)
              OR (crop_in = 1 AND (crop_current = 'weed' OR crop_current1 = 'weed' OR crop_current2 = 'weed'))) then
               if (date_within('[summerf_d2], [winterf_d2]') then
                  crop_in = crop_in + 1
                  ready_for_next = 1
                  crop_current2 = crop_current1
                  crop_current1 = crop_current
                  crop_current = '[winterf_name]'
                  crop_sow = '[winterf_name]'
                  ready_to_fert_pre_sow = 0
               endif
            endif

         elseif (next_crop = '[summerf_name]') then
              ! initiate (sow)
            if ((crop_in = 0)
              OR (crop_in = 1 AND (crop_current = 'weed' OR crop_current1 = 'weed' OR crop_current2 = 'weed'))) then
               if (date_within('[winterf_d2], [summerf_d2]') then
                  crop_in = crop_in + 1
                  ready_for_next = 1
                  crop_current2 = crop_current1
                  crop_current1 = crop_current
                  crop_current = '[summerf_name]'
                  crop_sow = '[summerf_name]'
                  ready_to_fert_pre_sow = 0
               endif
            endif
         endif

         if (crop_current = '[winterf_name]'
          OR crop_current1 = '[winterf_name]'
          OR crop_current2 = '[winterf_name]') then
               ! terminate (harvest)
            if (today = date('[winterf_d2]')+1) then
               crop_in = crop_in - 1
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            endif
         elseif (crop_current = '[summerf_name]'
              OR crop_current1 = '[summerf_name]'
              OR crop_current2 = '[summerf_name]') then
               ! terminate (harvest)
            if (today = date('[summerf_d2]')+1) then
               crop_in = crop_in - 1
               crop_current = crop_current1
               crop_current1 = crop_current2
               crop_current2 = blank
            endif
         endif

      </condition>
          <category name="Fallow properties">
            <summerf_name description="summer fallow name : " type="text">sf</summerf_name>
            <summerf_d2 description="summer fallow END   (dd-mmm) : " type="ddmmmdate">15-mar</summerf_d2>
            <winterf_name description="winter fallow name : " type="text">wf</winterf_name>
            <winterf_d2 description="winter fallow END   (dd-mmm) : " type="ddmmmdate">23-aug</winterf_d2>
          </category>
          <category name="Crop and fallow rotation sequence - finish with nil">
            <crop01 description="1 : " type="crop">maize</crop01>
            <crop02 description="2 : " type="crop">wf</crop02>
            <crop03 description="3 : " type="crop">peanut</crop03>
            <crop04 description="4 : " type="crop">wf </crop04>
            <crop05 description="5 : " type="crop">nil</crop05>
            <crop06 description="6 : " type="crop">wf </crop06>
            <crop07 description="7 : " type="crop">sf </crop07>
            <crop08 description="8 : " type="crop">wf </crop08>
            <crop09 description="9 : " type="crop">sf </crop09>
            <crop10 description="10 : " type="crop">wf  </crop10>
            <crop11 description="11 : " type="crop">sf  </crop11>
            <crop12 description="12 : " type="crop">wf  </crop12>
            <crop13 description="13 : " type="crop">sf  </crop13>
            <crop14 description="14 : " type="crop">wf  </crop14>
            <crop15 description="15 : " type="crop">sf  </crop15>
            <crop16 description="16 : " type="crop">wf  </crop16>
            <crop17 description="17 : " type="crop">sf  </crop17>
            <crop18 description="18 : " type="crop">wf  </crop18>
            <crop19 description="19 : " type="crop">sf  </crop19>
            <crop20 description="20 : " type="crop">wf  </crop20>
          </category>
        </rule>
        <rule name="Sow WEEDS using a variable rule with intercropping">
          <condition name="init">
         next = 1
         crop_in = 0
         blank = 'fallow'
         next_crop = blank
         crop_current = blank
         crop_current1 = blank
         crop_current2 = blank
         crop_sow = blank
         ready_for_next = 1
         ready_to_fert_pre_sow = 0
         days_last_year = 365
         fert_day_pre_sow = 0
         ready_to_till_pre_sow = 0
         till_day_pre_sow = 0
         days_after_weed_kill = 0

      </condition>
          <condition name="process"><![CDATA[
               if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then


                  if (today = date('[date2]')) then
                     if ('[rotation_exclude]' = 'no') then
                        ready_for_next = 1
                     endif
                  endif

                  if (wd_sow_opp_num > 0) then
                     wd_sow_opp_days = wd_sow_opp_days + 1
                  else
                  endif

                  if (crop_in = 0 OR ('[cropmethod]' = 'intercrop'
                      AND weed.plant_status = 'out')
                      AND days_after_weed_kill > 0) then
                        if (date_within('[date1], [date2]') = 1) then
                           crop_sow = 'waiting'
                           surface_moist = (sw(1) - ll15(1)) / (dul(1)- ll15(1))
                           if ((rain[[rain_days]] >= [rain_amount]  AND  esw >= [esw_amount] AND
                                 (surface_moist <= [surface_up] and surface_moist >= [surface_low])) OR
                               ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN


                              if (wd_sow_opp_days >= [rain_days] OR wd_sow_opp_num = 0) then
                                 wd_sow_opp_num = wd_sow_opp_num + 1
                                 wd_sow_opp_days = 0
                              endif

                              if ((wd_sow_opp_num >= [sow_opp]) OR ('[must_sow]' = 'yes' AND today = date('[date2]')) then
                                 if (date_within('[date1], [date_ch1]') = 1) then
                                    weed sow crop_class = [cla], plants = [density] (plants/m2), sowing_depth = [depth], cultivar = [cultivar1], row_spacing = [row_spacing]
                                 else
                                    weed sow crop_class = [cla], plants = [density] (plants/m2), sowing_depth = [depth], cultivar = [cultivar2], row_spacing = [row_spacing]
                                 endif
                                 crop_in = crop_in + 1
                                 if ('[rotation_exclude]' = 'no') then
                                    ready_for_next = 1
                                 endif
                                 crop_current2 = crop_current1
                                 crop_current1 = crop_current
                                 crop_current = '[crop]'
                                 crop_sow = '[crop]'
                              else
                                 !not this opportunity
                              endif
                        endif
                     endif
                  endif
               endif
                           ]]></condition>
          <condition name="end_of_day"><![CDATA[

               days_after_weed_kill = days_after_weed_kill + 1

               if (next_crop = '[crop]' OR next_crop = blank OR '[rotation_exclude]' = 'yes') then
                  !   Tillage - presowing seedbed preparation
                  if ( [till_days_pre_sow] > 0) then
                     ! calculate presowing tillage date
                     till_day_pre_sow = date('[date1]') - [till_days_pre_sow]
                     ! Need to correct for possible year boundary condition
                     if (till_day_pre_sow < today) then
                        till_day_pre_sow = days_this_year + till_day_pre_sow
                     endif
                     if (today = till_day_pre_sow) then
                        ready_to_till_pre_sow = 1
                     endif
                     if ((crop_in = 0 OR '[must_till]' = 'yes') AND (ready_to_till_pre_sow = 1)) then
                        ! tillage
                        if (weed.plant_status <> 'out') then
                           weed harvest, remove=[fraction]
                           weed kill_crop
                           weed end_crop
                           crop_in = crop_in - 1
                          if (crop_current = 'weed') then
                              crop_current = crop_current1
                              crop_current1 = crop_current2
                              crop_current2 = blank
                           elseif (crop_current1 = 'weed') then
                              crop_current1 = crop_current2
                              crop_current2 = blank
                           elseif (crop_current2 = 'weed') then
                              crop_current2 = blank
                           endif
                        endif
                     endif
                  endif
               endif


               if (date_within('[date1], [date2]') = 1) THEN
               else
                  wd_sow_opp_num = 0
                  wd_sow_opp_days = 0
               endif

            ]]></condition>
          <category name="Crop properties">
            <crop type="crop" description="Name of this crop">weed</crop>
            <cultivar1 type="list" listvalues="late, early" description="Enter first type"> early</cultivar1>
            <cla type="list" listvalues="winter_grass, winter_dicot, summer_grass, perennial_legume" description="Enter class type "> summer_grass</cla>
            <date_ch1 type="ddmmmdate" description="Enter type change date (dd-mmm)">1-jul</date_ch1>
            <cultivar2 type="list" listvalues="late, early" description="Enter second type">late</cultivar2>
            <cropmethod type="list" listvalues="sole, intercrop" description="Method of cropping">intercrop</cropmethod>
            <rotation_exclude type="yesno" description="Exclude from rotation sequence">yes</rotation_exclude>
          </category>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm)">01-oct</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm)">30-apr</date2>
            <must_sow type="yesno" description="Must Sow">no</must_sow>
            <rain_amount type="text" description="Enter amount of rainfall (mm)">10</rain_amount>
            <rain_days type="text" description="Enter number of days of rainfall (days)">5</rain_days>
            <esw_amount type="text" description="Enter amount of soil water (mm)">5</esw_amount>
            <sow_opp type="text" description="Enter sowing opportunity number to sow on (1..n)">1</sow_opp>
            <surface_up type="text" description="Enter upper limit of sw in top layer (0-2) (mm esw/mm soil)">2</surface_up>
            <surface_low type="text" description="Enter lower limit of sw in top layer (0-1) (mm esw/mm soil)">0</surface_low>
          </category>
          <category name="Sowing specs">
            <density type="text" description="Enter sowing density  (plants/m2)">5</density>
            <depth type="text" description="Enter sowing depth  (mm)">15</depth>
            <row_spacing type="text" description="Enter row spacing  (mm)">350</row_spacing>
          </category>
          <category name="Seed-bed Tillage Preparation">
            <till_days_pre_sow type="text" description="Enter number of days before window to prepare seed-bed (days)">0</till_days_pre_sow>
            <must_till type="yesno" description="Must Till">no</must_till>
            <tillage_type type="list" listvalues="user_defined, chisel, disc, planter,burn, burn_90, graze, scarifier, rip, blade, tine" description="Tillage type">disc</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm)">100</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1)">1</tillage_f_incorp>
            <fraction type="text" description="Enter biomass removal fraction of growing weeds from field (0-1)">0.0</fraction>
          </category>
        </rule>
        <rule name="Weeding at threshold weed biomass or maximum days">
          <condition name="init">
          daemerge = 0
      </condition>
          <condition name="end_of_day"><![CDATA[
         if ((crop_in >= 1)
            AND (weed.plant_status <> 'out')) then
            if (weed.stage >= 3.0) then
               daemerge = daemerge + 1
            endif

            if (weed.biomass > [weed_biomass] OR daemerge >= [weed_interval]) then
               if ((crop_in > 1 AND [weed_maxno_in] > weed_count_in) OR (crop_in = 1 AND [weed_maxno_out] > weed_count_out)) then
                  if (crop_in > 1) then
                     weed_count_in = weed_count_in + 1
                  elseif (crop_in = 1) then
                     weed_count_out = weed_count_out + 1
                  endif
                  weed harvest, remove = [fraction]
                  weed kill_crop plants_kill_fraction = [thin_fraction]
                  if ([thin_fraction] = 1.0) then
                     weed end_crop
                     days_after_weed_kill = 0
                 else
                  endif
                  '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [f_incorp], tillage_depth = [tillage_depth]
                  if ([thin_fraction] = 1.0) then
                    crop_in = crop_in - 1
                    if (crop_current = 'weed') then
                        crop_current = crop_current1
                        crop_current1 = crop_current2
                        crop_current2 = blank
                     elseif (crop_current1 = 'weed') then
                        crop_current1 = crop_current2
                        crop_current2 = blank
                     elseif (crop_current2 = 'weed') then
                        crop_current2 = blank
                     endif
                     daemerge = 0
                  else
                  endif
               else
               endif
            else
            endif
         else
            daemerge = 0
         endif

         if (((crop_in = 1)
            AND (weed.plant_status <> 'out'))
            OR (crop_in = 0)) then
            weed_count_in = 0
         else
            weed_count_out = 0
         endif
      ]]></condition>
          <category name="Weeding properties">
            <weed_interval description="Maximum days after emergence to weed (days) : " type="text">35</weed_interval>
            <weed_biomass description="Weeding biomass threshold to weed (kg/ha) : " type="text">5000</weed_biomass>
            <weed_maxno_in description="Maximum number of in-crop weedings (1..n) : " type="text">1</weed_maxno_in>
            <weed_maxno_out description="Maximum number of fallow weedings (1..n) : " type="text">0</weed_maxno_out>
            <thin_fraction description="Enter fraction of weed population weeded (0-1) : " type="text">1.0</thin_fraction>
            <fraction description="Enter biomass removal fraction from field (0-1) : " type="text">0.0</fraction>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">surface organic matter</surfaceommodule>
            <tillage_type description="Enter name of tillage type : " type="text">user_defined</tillage_type>
            <f_incorp description="Enter fraction of surface residues incorporated into soil (0-1) : " type="text">0.1</f_incorp>
            <tillage_depth description="Enter depth of incorporation of surface residues (mm) : " type="text">25</tillage_depth>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type description="Organic Matter type">wheat</type>
        <mass description="Initial surface residue (kg/ha)">0</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <outputfile name="outputfile">
        <filename name="filename">Rotation Maize_Legume and Weeds Simulation.out</filename>
        <variables name="My Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="esw" description="Extractable Soil Water (mm)" VariableType="Water" array="?" />
          <variable name="day" description="Day" array="?" />
          <variable name="year" description="Year" array="?" />
          <variable name="maize.yield as yield_mz" description="Maize Yield (kg/ha)" array="?" />
          <variable name="maize.stover as stover_mz" description="Maize Stover (kg/ha)" array="?" />
          <variable name="maize.biomass as biom_mz" description="Maize Total Above Ground Biomass (kg/ha)" array="?" />
          <variable name="surface organic matter.surfaceom_wt" description="Total mass of all surface organic materials" array="?" />
          <variable name="peanut.yield as yield_pnut" description="Yield" array="?" />
          <variable name="peanut.biomass as biomass_pnut" description="Biomass" array="?" />
          <variable name="Manager.crop_in" array="?" />
          <variable name="Manager.next_crop" array="?" />
          <variable name="Manager.ready_for_next" array="?" />
        </variables>
        <events name="My Variables Events" />
      </outputfile>
      <maize />
      <weed />
      <peanut />
      <canopy name="Canopy">
        <intercrop name="intercrop" description="Enter crop names to intercrop" type="text">maize peanut weed</intercrop>
      </canopy>
      <soil name="Zimbabwe Fertile Luvisol (187mm PAWC)">
        <profile>
          <layer>
            <thickness>100</thickness>
            <ll15>0.11</ll15>
            <airdry>0.04</airdry>
            <dul>0.22</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.11</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.11</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.11</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.11</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.11</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.11</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.11</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1.2</oc>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <ll name="weed">0.11</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.14</ll15>
            <airdry>0.14</airdry>
            <dul>0.25</dul>
            <sat>0.3</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.14</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.14</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.14</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.14</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.14</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.14</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.14</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>1</oc>
            <fbiom>0.01</fbiom>
            <finert>0.65</finert>
            <ll name="weed">0.14</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>100</thickness>
            <ll15>0.16</ll15>
            <airdry>0.15</airdry>
            <dul>0.27</dul>
            <sat>0.32</sat>
            <swcon>0.5</swcon>
            <bd>1.35</bd>
            <ll name="sorg">0.16</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.16</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.16</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.16</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.16</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.16</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.16</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6</ph>
            <oc>0.86</oc>
            <fbiom>0.01</fbiom>
            <finert>0.7</finert>
            <ll name="weed">0.16</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.17</ll15>
            <airdry>0.16</airdry>
            <dul>0.28</dul>
            <sat>0.33</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.17</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.17</ll>
            <kl name="cowpea">0.08</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.17</ll>
            <kl name="maize">0.08</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.17</ll>
            <kl name="mucuna">0.08</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.17</ll>
            <kl name="peanut">0.08</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.17</ll>
            <kl name="pigeonp">0.08</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.17</ll>
            <kl name="soybean">0.08</kl>
            <xf name="soybean">1</xf>
            <ph>6.2</ph>
            <oc>0.83</oc>
            <fbiom>0.01</fbiom>
            <finert>0.75</finert>
            <ll name="weed">0.17</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.19</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.34</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.19</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.19</ll>
            <kl name="cowpea">0.06</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.19</ll>
            <kl name="maize">0.06</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.19</ll>
            <kl name="mucuna">0.06</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.19</ll>
            <kl name="peanut">0.06</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.19</ll>
            <kl name="pigeonp">0.06</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.19</ll>
            <kl name="soybean">0.06</kl>
            <xf name="soybean">1</xf>
            <ph>6.5</ph>
            <oc>0.58</oc>
            <fbiom>0.01</fbiom>
            <finert>0.8</finert>
            <ll name="weed">0.19</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.3</dul>
            <sat>0.35</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.07</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.04</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.04</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.04</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.04</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.04</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.04</kl>
            <xf name="soybean">1</xf>
            <ph>6.7</ph>
            <oc>0.54</oc>
            <fbiom>0.01</fbiom>
            <finert>0.85</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.07</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.36</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.03</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.03</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.03</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.03</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.03</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.03</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.47</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.32</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.02</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.02</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.02</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.02</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.02</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.02</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
          <layer>
            <thickness>200</thickness>
            <ll15>0.2</ll15>
            <airdry>0.18</airdry>
            <dul>0.31</dul>
            <sat>0.37</sat>
            <swcon>0.5</swcon>
            <bd>1.4</bd>
            <ll name="sorg">0.2</ll>
            <kl name="sorg">0.04</kl>
            <xf name="sorg">1</xf>
            <ll name="cowpea">0.2</ll>
            <kl name="cowpea">0.01</kl>
            <xf name="cowpea">1</xf>
            <ll name="maize">0.2</ll>
            <kl name="maize">0.01</kl>
            <xf name="maize">1</xf>
            <ll name="mucuna">0.2</ll>
            <kl name="mucuna">0.01</kl>
            <xf name="mucuna">1</xf>
            <ll name="peanut">0.2</ll>
            <kl name="peanut">0.01</kl>
            <xf name="peanut">1</xf>
            <ll name="pigeonp">0.2</ll>
            <kl name="pigeonp">0.01</kl>
            <xf name="pigeonp">1</xf>
            <ll name="soybean">0.2</ll>
            <kl name="soybean">0.01</kl>
            <xf name="soybean">1</xf>
            <ph>6.8</ph>
            <oc>0.5</oc>
            <fbiom>0.01</fbiom>
            <finert>0.93</finert>
            <ll name="weed">0.20</ll>
            <kl name="weed">0.04</kl>
            <xf name="weed">1.00</xf>
          </layer>
        </profile>
        <Cona>2.5</Cona>
        <U>9</U>
        <CN2Bare>75</CN2Bare>
        <Salb>0.13</Salb>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <CNRed>20</CNRed>
        <CNCov>0.8</CNCov>
        <RootCN>45</RootCN>
        <RootWT>1000</RootWT>
        <SoilCN>14.5</SoilCN>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>0.237</no3>
              <nh4>0.194</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.484</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.712</no3>
              <nh4>0.290</nh4>
              <thickness>100</thickness>
            </layer>
            <layer>
              <no3>0.554</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.395</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.237</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.158</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
            <layer>
              <no3>0.079</no3>
              <nh4>0.290</nh4>
              <thickness>200</thickness>
            </layer>
          </profile>
        </InitNitrogen>
        <InitWater>
          <PercentMethod>
            <Percent>0.00</Percent>
            <Distributed>Filled from top</Distributed>
          </PercentMethod>
        </InitWater>
        <WaterFormat>VolumetricPercent</WaterFormat>
      </soil>
    </area>
  </simulation>
  <simulation name="Eucalypt Forest Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1987</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1997</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Eucalypt Forest Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\Toolara.met</filename>
    </metfile>
    <area name="Block">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Planting rule">
          <condition name="start_of_day">
         if (date('[date1]') = today) and [crop].plant_status = 'out' then
               [crop]  establish plants =[density], init_section = seedling
         endif
            </condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter planting date (dd-mmm) : ">15-mar</date1>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of growth module to sow : ">egrandis</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">1111</density>
          </category>
        </rule>
        <rule name="Establishment fertiliser">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="For which module is fertiliser applied : ">egrandis</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">establishing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
        <rule name="Fertilise on a date">
          <condition name="start_of_day">
            if (date('[date1]') = today) then
               [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            endif
        </condition>
          <category name="When should fertiliser be applied">
            <date1 type="ddmmmdate" description="Enter application date (dd-mmm) : ">15-mar</date1>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of fertiliser to apply (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
      </manager>
      <fertiliser name="fertiliser" />
      <surfaceom name="LitterLayer">
        <PoolName>egrandis</PoolName>
        <type>grandis</type>
        <mass>1000.</mass>
        <cnr>80.0</cnr>
        <standing_fraction>0.0</standing_fraction>
      </surfaceom>
      <micromet name="micromet">
        <soilalbedo name="soilalbedo">0.23</soilalbedo>
        <a_interception name="a_interception">0.0</a_interception>
        <b_interception name="b_interception">0.0</b_interception>
        <c_interception name="c_interception">0.1</c_interception>
        <d_interception name="d_interception">0.0</d_interception>
      </micromet>
      <egrandis />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="esw" array="?" description="Extractable Soil Water (mm)" VariableType="Water" />
          <variable name="egrandis.lai" description="E. grandis leaf area index" array="?" />
          <variable name="egrandis.adm_green" array="?" description="E. grandis Live Above-ground Biomass Pools" />
          <variable name="egrandis.fw" description="E. grandis water stress factor" array="?" />
          <variable name="egrandis.fn" description="E. grandis N stress factor" array="?" />
          <variable name="egrandis.plants" description="E. grandis Plant Population" array="?" />
        </variables>
        <events name="Reporting Frequency">
          <event name="post" description="End of daily simulation time step" />
        </events>
      </outputfile>
      <soil name="UniformSoil">
        <Site>Hypothetical</Site>
        <Region />
        <LocalName>Uniform</LocalName>
        <SoilType>Loam</SoilType>
        <NearestTown />
        <NaturalVegetation />
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1</oc>
            <ph>6</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.2</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.07</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.9</oc>
            <ph>6</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.2</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.07</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.9</oc>
            <ph>6</ph>
            <fbiom>0.02</fbiom>
            <finert>0.8</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.3</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.07</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.9</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.06</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.8</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.6</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.04</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.4</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.8</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.03</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.3</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>0.9</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.03</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.2</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>1</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.03</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.2</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>1.1</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.02</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.1</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>1</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.02</kl>
            <xf name="egrandis">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.1</ll15>
            <airdry>0.07</airdry>
            <dul>0.2</dul>
            <sat>0.3</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.1</oc>
            <ph>6</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1</no3>
            <nh4>0.1</nh4>
            <ec>1</ec>
            <ll name="egrandis">0.1</ll>
            <kl name="egrandis">0.02</kl>
            <xf name="egrandis">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>4</U>
        <Salb>0.13</Salb>
        <Cn2Bare>65</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>60</RootCn>
        <RootWt>1000</RootWt>
        <SoilCn>20</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>0.5</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Sugar Simulation">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1944</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1993</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Sugar Simulation.sum</filename>
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\ingham.met</filename>
    </metfile>
    <area name="paddock">
      <registrations name="global" />
      <sugar />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="sugar.biomass" description="Sugar total above-ground biomass (green + trash) (g/m2)" array="?" />
          <variable name="sugar.cane_wt" description="Sugar cane dry weight (g/m2)" array="?" />
          <variable name="sugar.sucrose_wt" description="Sugar sucrose weight (g/m2)" array="?" />
          <variable name="sugar.sw_demand" description="Sugar crop demand for water (potential uptake) (mm)" array="?" />
          <variable name="sugar.das" description="Sugar days after sowing" array="?" />
          <variable name="sugar.ratoon_no" description="Sugar Ratoon number" array="?" />
          <variable name="sugar.crop_status" description="Sugar Crop status (dead,alive,out)" array="?" />
          <variable name="sugar.esw" array="?" description="Extractable Soil Water (mm)" VariableType="Water" />
          <variable name="sugar.lai" description="Sugar green leaf area index" array="?" />
          <variable name="sugar.nfact_photo" description="Sugar Nitrogen stress factor on photosynthesis (0-1)" array="?" />
          <variable name="sugar.root_depth" description="Sugar depth of roots (mm)" array="?" />
          <variable name="sugar.swdef_photo" description="Sugar water stress factor on photosynthesis (0-1)" array="?" />
          <variable name="sugar.canefw" description="Sugar cane fresh weight (t/ha)" array="?" />
          <variable name="radn" description="Solar Radiation (MJ/m2/day)" array="?" />
          <variable name="rain" description="Rainfall (mm)" array="?" />
          <variable name="maxt" description="Maximum temperature (oC)" array="?" />
          <variable name="mint" description="Minimum temperature (oC)" array="?" />
        </variables>
        <events name="Reporting Frequency">
          <event name="post" description="End of daily simulation time step" />
        </events>
      </outputfile>
      <fertiliser name="fertiliser" />
      <manager name="Manager">
        <rule name="SUGAR management">
          <condition name="start_of_day"><![CDATA[
            ! -----------------------------------------------------------------
            ! Book keeping to round days to integer values
            plantlen = nearest_int(plantlen)
            ratoonlen = nearest_int(ratoonlen)

            ! Initialise and set a time counter for entire run
            dah = 0

            if (sugar.crop_status = 'alive') then
               dah = 0

               ! Set harvest dates for each crop phase
               if (sugar.das = [plantlen] and ratoon_no = 0) or
                  (sugar.das = [ratoonlen] and ratoon_no > 0) then

                  sugar harvest

                  if (ratoon_no = [NoRatoons] + 1) then
                     ! plough the crop out
                     sugar kill_crop
                     sugar end_crop

                  else
                     ! Set stalk density
                     sugar.plants = [ratoon_stalks]
                  endif
               else
                  ! We have not reached the harvest date for this ratoon.
               endif

            elseif (sugar.crop_status = 'dead') then
               sugar harvest
               sugar end_crop

            elseif (sugar.crop_status = 'out') and (today = date('[planting_day]') then
               sugar sow plants = 10 (), cultivar = [variety], sowing_depth = [sowing_depth]
               sugar.plants = [plant_stalks]
               dah = 0

            else
               dah = dah + 1
            endif
               ]]></condition>
          <category name="Sugar plant crop management parameters">
            <crop type="crop" description="Enter name of crop to sow : ">sugar</crop>
            <planting_day type="ddmmmdate" description="Enter planting date (dd-mmm) : ">1-apr</planting_day>
            <plantlen type="text" description="Duration of a plant crop (days) (30 days/month * 15 months) : ">450</plantlen>
            <plant_stalks type="text" description="Stalk density of plant crop (/m2) :">10</plant_stalks>
            <variety type="list" listvalues="q117,q96,q138,ts65-28,h73,q141,nco376,n12,n14,cp51,r570,m1356,m55560,q124" description="Planting variety :">q117</variety>
            <sowing_depth type="text" description="Planting depth mm) :">150</sowing_depth>
          </category>
          <category name="Ratoon management parameters">
            <NoRatoons type="text" description="Number of ratoons (max = 5): ">4</NoRatoons>
            <ratoonlen type="text" description="Duration of a ratoon crop (days) (30 days/month * 13 months) : ">390</ratoonlen>
            <ratoon_stalks type="text" description="Stalk density of ratoon crop (/m2) :">10</ratoon_stalks>
          </category>
        </rule>
        <rule name="Fertilise on fixed date">
          <condition name="start_of_day"><![CDATA[
         if (today = date('[fert_date]') then
            N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
            if (N_topsoil < [fert_criteria]) then
               [fertmodule] apply amount = [fert_amount] (kg/ha), depth = 50 (mm), type = [fert_type] ()
            endif
         endif ]]></condition>
          <category name="When should fertiliser be applied">
            <fert_date type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-sep</fert_date>
            <fert_criteria type="text" description="Don't add fertiliser if N in top 2 layers exceeds (kg/ha) : ">1000</fert_criteria>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">200</fert_amount>
            <fert_type type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type>
          </category>
        </rule>
      </manager>
      <soil name="Sample Soil">
        <Site>Jimbour</Site>
        <Region>South East Queensland</Region>
        <LocalName>Waco</LocalName>
        <SoilType>Black Vertosol</SoilType>
        <NearestTown>Jimbour, Q 4352</NearestTown>
        <NaturalVegetation>Grassland, mainly Qld bluegrass</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.14</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1.04</oc>
            <ph>8.4</ph>
            <fbiom>0.025</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <ec>0.2</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.29</ll>
            <kl name="Sugar">0.1</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.03</bd>
            <ll15>0.29</ll15>
            <airdry>0.26</airdry>
            <dul>0.53</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>8.8</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.25</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.29</ll>
            <kl name="Sugar">0.1</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.31</ec>
            <ll name="Barley">0.32</ll>
            <kl name="Barley">0.08</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.36</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.39</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.35</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.32</ll>
            <kl name="Sugar">0.08</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="Barley">0.38</ll>
            <kl name="Barley">0.06</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.43</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.08</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.38</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.32</ll>
            <kl name="Sugar">0.06</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.06</bd>
            <ll15>0.3</ll15>
            <airdry>0.3</airdry>
            <dul>0.52</dul>
            <sat>0.57</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.77</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.59</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.04</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.51</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.3</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.37</ll>
            <kl name="Maize">0.06</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.09</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.35</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.35</ll>
            <kl name="Sugar">0.04</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.11</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.45</oc>
            <ph>9.1</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.84</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.02</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.31</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.4</ll>
            <kl name="Maize">0.04</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.07</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.38</ll>
            <kl name="Sugar">0.02</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.12</bd>
            <ll15>0.32</ll15>
            <airdry>0.32</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.27</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.93</ec>
            <ll name="Barley">0.41</ll>
            <kl name="Barley">0.01</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.32</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.42</ll>
            <kl name="Maize">0.02</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.05</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.41</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
            <ll name="Sugar">0.41</ll>
            <kl name="Sugar">0.01</kl>
            <xf name="Sugar">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.15</bd>
            <ll15>0.33</ll15>
            <airdry>0.33</airdry>
            <dul>0.48</dul>
            <sat>0.53</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.22</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.48</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.48</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.33</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.48</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.48</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.48</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="Sugar">0.48</ll>
            <kl name="Sugar">0</kl>
            <xf name="Sugar">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.18</bd>
            <ll15>0.34</ll15>
            <airdry>0.34</airdry>
            <dul>0.47</dul>
            <sat>0.52</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.16</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.06</ec>
            <ll name="Barley">0.47</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.47</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.34</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.47</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.47</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.47</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="Sugar">0.47</ll>
            <kl name="Sugar">0</kl>
            <xf name="Sugar">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.35</ll15>
            <airdry>0.35</airdry>
            <dul>0.46</dul>
            <sat>0.51</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.13</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.05</ec>
            <ll name="Barley">0.46</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.46</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.35</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.46</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.46</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.46</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="Sugar">0.46</ll>
            <kl name="Sugar">0</kl>
            <xf name="Sugar">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.25</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.44</dul>
            <sat>0.49</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.12</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.44</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.44</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.36</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.44</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.42</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.44</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.44</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="Sugar">0.44</ll>
            <kl name="Sugar">0</kl>
            <xf name="Sugar">0</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>0.5004617</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.500</no3>
              <nh4>0.600</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Wether_Lucerne_Supplement">
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\Workshop.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date" lbound="1/01/1995" ubound="31/12/1996">1/01/1995</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date" lbound="1/01/1995" ubound="31/12/1996">30/12/1996</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Wether_Lucerne.sum</filename>
    </summaryfile>
    <outputfile name="Outputfile">
      <variables name="My Variables">
        <variable name="StockHerbageConverter.dm_feed_on_offer()" description="Dry matter of feed on offer (kg/ha)" array="?" />
        <variable name="StockHerbageConverter.dm_feed_removed()" description="Dry matter of feed removed (kg/ha)" array="?" />
        <variable name="stock.age" array="?" />
        <variable name="stock.wt_change" array="?" />
        <variable name="stock.weight" array="?" />
        <variable name="stock.sex" array="?" />
        <variable name="stock.past_intake" array="?" />
        <variable name="stock.number" array="?" />
        <variable name="lucerne.biomass" description="Biomass" array="?" />
        <variable name="lucerne.stage" description="Plant stage" array="?" />
        <variable name="lucerne.lai" description="Leaf area index" array="?" />
        <variable name="stock.cond_score_all" array="?" />
        <variable name="stock.past_intake_all" array="?" />
        <variable name="stock.supp_intake_all" array="?" />
        <variable name="stock.fleece_wt_all" array="?" />
        <variable name="stock.fibre_diam_all" array="?" />
        <variable name="clock.dd/mmm/yyyy" description="Date (dd/mmm/yyyy)" array="?" />
        <variable name="clock.year" description="Year" array="?" />
        <variable name="met.rain" description="Rainfall (mm)" array="?" />
        <variable name="lucerne.cover_tot" array="?" />
        <variable name="lucerne.dlt_dm" description="Change in dry matter" array="?" />
        <variable name="lucerne.dlt_dm_green as dlt_dm_green_leaf(2)" description="change in green pool" array="?" />
        <variable name="lucerne.dlt_dm_green as dlt_dm_green_stem(3)" description="change in green pool" array="?" />
        <variable name="lucerne.dm_green_leaf" description="Weight of leaf" array="?" />
        <variable name="lucerne.dm_green_stem" description="Weight of stem" array="?" />
        <variable name="lucerne.dm_senesced_leaf" description="Weight of senesced leaf" array="?" />
        <variable name="lucerne.dm_senesced_stem" description="Weight of senesced stem" array="?" />
        <variable name="lucerne.dm_dead_stem" description="Weight of dead stem" array="?" />
        <variable name="lucerne.dm_dead_leaf" description="Weight of dead leaf" array="?" />
      </variables>
      <events name="My Variables Events">
        <event name="clock.post" description="End of daily simulation time step" />
      </events>
    </outputfile>
    <manager name="Manager">
      <rule name="Sow on a fixed date">
        <condition name="start_of_day">
        if (today = date('[date]') then
              [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing]
         endif
               </condition>
        <category name="Sowing criteria">
          <date type="text" description="Enter sowing date (dd-mmm) : ">1/07/1995</date>
        </category>
        <category name="Sowing parameters">
          <crop type="crop" description="Enter name of crop to sow : ">lucerne</crop>
          <density type="text" description="Enter sowing density  (plants/m2) : ">100</density>
          <depth type="text" description="Enter sowing depth  (mm) : ">50</depth>
          <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">sceptre</cultivar>
          <row_spacing type="text" description="Enter row spacing (mm) : ">500</row_spacing>
        </category>
      </rule>
      <rule name="Buy sheep on feed-on-offer">
        <condition name="init">
               sheep_presence = 'off'
            </condition>
        <condition name="start_of_day"><![CDATA[
        if ([herbage_module].biomass >= [buy_feed_on_offer] AND sheep_presence = 'off') then
           [stockmodule] buystock number = [buy_number] (-), genotype = '[genotype]', sex = [sex], age = [buy_age] (months), weight = [buy_weight] (kg)
           sheep_presence = 'on'
         endif
               ]]></condition>
        <category name="Buy properties">
          <stockmodule type="modulename" description="Name of stock converter module : ">StockScienceConverter</stockmodule>
          <genotype type="list" listvalues="black face x white face,border leicester, border leicester x merino,columbia,corriedale,delaine-merino,dorset x merino,dorset,finnsheep,hampshire,large merino,medium merino,small merino,polwarth,polypay,romney,ryeland,southdown,suffolk,targhee,texel,US corriedale,US romney,US southdown,US suffolk" description="Select Genotype : ">suffolk</genotype>
          <herbage_module type="modulename" description="Module supplying herbage : ">lucerne</herbage_module>
          <buy_feed_on_offer type="text" description="Feed on offer (kg/ha) : ">200</buy_feed_on_offer>
          <buy_number type="text" description="Number of stock : ">15</buy_number>
          <sex type="list" listvalues="ewe,wether,ram,crypto" description="Select sex : ">wether</sex>
          <buy_age type="text" description="Age (months) : ">12</buy_age>
          <buy_weight type="text" description="Weight (kg) : ">45</buy_weight>
        </category>
      </rule>
      <rule name="Sell sheep on weight">
        <condition name="start_of_day"><![CDATA[
        if ((stock.weight >= [sell_on_weight_gain] OR stock.weight <= [sell_on_weight_loss]) AND sheep_presence = 'on') then
           [stockmodule] sellstock number = [sell_number] (-)
           sheep_presence = 'off'
        endif
               ]]></condition>
        <category name="Sell properties">
          <stockmodule type="modulename" description="Name of stock converter module : ">StockScienceConverter</stockmodule>
          <sell_on_weight_gain type="text" description="Weight (gaining) : ">50</sell_on_weight_gain>
          <sell_on_weight_loss type="text" description="Weight (losing) : ">40</sell_on_weight_loss>
          <sell_number type="text" description="Number of stock : ">15</sell_number>
        </category>
      </rule>
      <rule name="Buy supplement on a fixed date">
        <condition name="start_of_day">
        if (today = date('[buy_date]') then
           [supplementmodule] buysupplement supplement = [buy_name] (-), amount = [buy_amount] (kg)
         endif
               </condition>
        <category name="Buy properties">
          <supplementmodule type="modulename" description="Name of supplement converter module : ">SupplementScienceConverter</supplementmodule>
          <buy_date type="text" description="Date (dd-mmm) : ">1-jan</buy_date>
          <buy_name type="list" listvalues="'barley- crushed','barley- whole','barley straw','beans- field','bran','brewers grains','canola meal','canola straw','citrus pulp- dry','coconut meal','cottonseed- whole','cottonseed meal','fish meal','groundnut meal','hay','lucerne pellets','lupins','linseed meal','maize','maize bran','maize gluten fd','maize straw','molasses','oats- crushed','oats- whole','oat bran','oat chaff','oat straw','peas','pea pod meal','pea straw','pellets','rice- crushed','rice- whole','rice bran','rice straw','rye','safflower meal','silage','sorghum','sorghum- whole','soya bean meal','sunflower meal','tallow','triticale- crushed','triticale- whole','urea','vetch grain','wheat- crushed','wheat- whole','wheat chaff','wheat pollard','wheat straw'" description="Name of the supplement to purchase : ">'lupins'</buy_name>
          <buy_amount type="text" description="Fresh weight of supplement to purchase (kg) : ">1000</buy_amount>
        </category>
      </rule>
      <rule name="Feed supplement on animal condition loss">
        <condition name="init">
         FALSE = 0
         TRUE = 1
         feeding = FALSE
         feed_rate = 0.0     ! Rate of feeding in kg FW/day
         crit_cs = 0.0
         feed_rate_factor = 0.2
         est_lag_days = 10.0 / feed_rate_factor
         initial_feed_rate = 0.0
            </condition>
        <condition name="start_of_day"><![CDATA[
         dlt_cond_score = cond_score_all - yest_cond_score_all
         yest_cond_score_all = cond_score_all
            if (feeding = TRUE AND cond_score_all = 0.0) then
               crit_cs = 0.0
               feeding = FALSE
            endif

            if (dlt_cond_score[[days]] < [crit_condition_change] AND crit_cs <= 0.0) then
               crit_cs = cond_score_all
            endif
            if ((feeding = FALSE) AND (cond_score_all < crit_cs)) then
               feeding = TRUE
               feed_rate = initial_feed_rate
            else
               ! leave feeding as is
            endif

            if (feeding = TRUE) then
               feed_rate = feed_rate - feed_rate_factor * (cond_score_all + dlt_cond_score*est_lag_days - crit_cs)
               if (feed_rate > [max_feed_rate]) then
                  feed_rate = [max_feed_rate]
               elseif (feed_rate < 0.0) then
                  feed_rate = 0.0
               endif
               if (feed_rate > 0) then
                   feed_amount = feed_rate * number_all
                   [supplementmodule] feedsupplement  supplement = [feed_name], amount = feed_amount
               else
                  feed_rate = 0.0
               endif
            else
               feed_rate = 0.0
            endif

               ]]></condition>
        <category name="Feed properties">
          <supplementmodule type="modulename" description="Name of supplement converter module : ">SupplementScienceConverter</supplementmodule>
          <days type="text" description="Number of days to sum condition change : ">5</days>
          <crit_condition_change type="text" description="Critical condition change needed to start feeding (kg/head) : ">0.0</crit_condition_change>
          <max_feed_rate type="text" description="Maximum rate of feeding in kg FW/day; 1.0 is sensible for sheep : ">1.0</max_feed_rate>
          <feed_name type="list" listvalues="'barley- crushed','barley- whole','barley straw','beans- field','bran','brewers grains','canola meal','canola straw','citrus pulp- dry','coconut meal','cottonseed- whole','cottonseed meal','fish meal','groundnut meal','hay','lucerne pellets','lupins','linseed meal','maize','maize bran','maize gluten fd','maize straw','molasses','oats- crushed','oats- whole','oat bran','oat chaff','oat straw','peas','pea pod meal','pea straw','pellets','rice- crushed','rice- whole','rice bran','rice straw','rye','safflower meal','silage','sorghum','sorghum- whole','soya bean meal','sunflower meal','tallow','triticale- crushed','triticale- whole','urea','vetch grain','wheat- crushed','wheat- whole','wheat chaff','wheat pollard','wheat straw'" description="Name of the supplement to purchase : ">'lupins'</feed_name>
        </category>
      </rule>
    </manager>
    <surfaceom name="Surface Organic Matter">
      <PoolName description="Organic Matter pool name">wheat_stubble</PoolName>
      <type description="Organic Matter type">wheat</type>
      <mass description="Initial surface residue (kg/ha)">1000.</mass>
      <cnr description="C:N ratio of initial residue">80.0</cnr>
      <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
    </surfaceom>
    <lucerne />
    <stock>
      <sheep>
        <genotypename>medium merino</genotypename>
        <number>0</number>
        <sex type="list" listvalues="ewe,wether,ram,crypto">wether</sex>
        <age>730.0</age>
        <weight>50.0</weight>
        <max_prev_wt>50.0</max_prev_wt>
        <fleece_wt>6.0</fleece_wt>
        <fibre_diam>20.0</fibre_diam>
        <mated_to />
        <pregnant>0</pregnant>
        <lactating>0</lactating>
        <no_young>0</no_young>
        <birth_cs>0.0</birth_cs>
        <lamb_wt>0.0</lamb_wt>
        <lamb_fleece_wt>0.0</lamb_fleece_wt>
        <paddock />
        <tag>0</tag>
        <priority>0</priority>
      </sheep>
      <stockgenotype name="Medium Merino Genotype">
        <genotypename>medium merino</genotypename>
        <dam_breed>medium merino</dam_breed>
        <sire_breed>medium merino</sire_breed>
        <generation>0</generation>
        <srw>50.0</srw>
        <conception1>0.8</conception1>
        <conception2>0.15</conception2>
        <death_rate>0.02</death_rate>
        <ref_fleece_wt>4.5</ref_fleece_wt>
        <max_fibre_diam>19.0</max_fibre_diam>
        <fleece_yield>0.7</fleece_yield>
        <peak_milk>25.0</peak_milk>
      </stockgenotype>
    </stock>
    <StockScienceConverter>
      <debug type="list" listvalues="on,off">off</debug>
      <stock_module type="modulename">stock</stock_module>
      <conversion_model>nonherbage</conversion_model>
      <fraction_faeces_added>0.5</fraction_faeces_added>
      <fraction_urine_added>0.5</fraction_urine_added>
    </StockScienceConverter>
    <StockHerbageConverter>
      <debug type="list" listvalues="on,off">off</debug>
      <conversion_model>herbage</conversion_model>
      <herbage_model>plant</herbage_model>
      <herbage_module_name type="modulename">lucerne</herbage_module_name>
    </StockHerbageConverter>
    <FarmwiseSequencerConverter name="FarmwiseSequencer" />
    <SupplementScienceConverter>
      <debug type="list" listvalues="on,off">off</debug>
      <supplement_module type="modulename">supplement</supplement_module>
    </SupplementScienceConverter>
    <supplement>
      <spoilage_time>0.0</spoilage_time>
      <supplementstore name="Wheat Store">
        <name>wheat</name>
        <stored>10000000</stored>
        <roughage>false</roughage>
        <dm_content>0.89</dm_content>
        <dmd>0.9</dmd>
        <me_content>13.8</me_content>
        <cp_conc>0.14</cp_conc>
        <prot_dg>0.92</prot_dg>
        <p_conc>0.0038</p_conc>
        <s_conc>0.0014</s_conc>
        <ee_conc>0.02</ee_conc>
        <adip2cp>0.02</adip2cp>
        <ash_alk>0.18</ash_alk>
        <max_passage>0.0</max_passage>
      </supplementstore>
    </supplement>
    <accum name="accum">
      <variable name="variable">dlt_cond_score[20]</variable>
    </accum>
    <soil name="SampleBlackEarth">
      <region>South East Queensland</region>
      <site>Generic</site>
      <SoilType>Black Vertosol</SoilType>
      <comment>estimated cotton LL</comment>
      <profile>
        <layer>
          <thickness>150</thickness>
          <bd>1.02</bd>
          <ll15>0.29</ll15>
          <airdry>0.14</airdry>
          <dul>0.54</dul>
          <sat>0.59</sat>
          <swcon>0.3</swcon>
          <fbiom>0.025</fbiom>
          <finert>0.4</finert>
          <oc>1.04</oc>
          <ph>8.4</ph>
          <ec>0.2</ec>
          <ll name="wheat">0.29</ll>
          <kl name="wheat">0.1</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.29</ll>
          <kl name="barley">0.1</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.29</ll>
          <kl name="canola">0.1</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.29</ll>
          <kl name="Chickpea">0.1</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.29</ll>
          <kl name="Lucerne">0.1</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.29</ll>
          <kl name="Maize">0.1</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.29</ll>
          <kl name="Perennial Grass">0.1</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.29</ll>
          <kl name="Sorghum">0.1</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.29</ll>
          <kl name="Cowpea">0.1</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.29</ll>
          <kl name="Fababean">0.1</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.29</ll>
          <kl name="Mungbean">0.1</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.29</ll>
          <kl name="Navybean">0.1</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.29</ll>
          <kl name="Peanut">0.1</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.29</ll>
          <kl name="Pigeonpea">0.1</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.29</ll>
          <kl name="Soybean">0.1</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.29</ll>
          <kl name="Stylo">0.1</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.29</ll>
          <kl name="Sugar">0.1</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.29</ll>
          <kl name="Sunflower">0.1</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.29</ll>
          <kl name="Lablab">0.1</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.29</ll>
          <kl name="Cotton">0.1</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>150</thickness>
          <bd>1.03</bd>
          <ll15>0.29</ll15>
          <airdry>0.26</airdry>
          <dul>0.53</dul>
          <sat>0.58</sat>
          <swcon>0.3</swcon>
          <fbiom>0.02</fbiom>
          <finert>0.6</finert>
          <oc>0.89</oc>
          <ph>8.8</ph>
          <ec>0.25</ec>
          <ll name="wheat">0.29</ll>
          <kl name="wheat">0.1</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.29</ll>
          <kl name="barley">0.1</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.29</ll>
          <kl name="canola">0.1</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.29</ll>
          <kl name="Chickpea">0.1</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.29</ll>
          <kl name="Lucerne">0.1</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.29</ll>
          <kl name="Maize">0.1</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.29</ll>
          <kl name="Perennial Grass">0.1</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.29</ll>
          <kl name="Sorghum">0.1</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.29</ll>
          <kl name="Cowpea">0.1</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.29</ll>
          <kl name="Fababean">0.1</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.29</ll>
          <kl name="Mungbean">0.1</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.29</ll>
          <kl name="Navybean">0.1</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.29</ll>
          <kl name="Peanut">0.1</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.29</ll>
          <kl name="Pigeonpea">0.1</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.29</ll>
          <kl name="Soybean">0.1</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.29</ll>
          <kl name="Stylo">0.1</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.29</ll>
          <kl name="Sugar">0.1</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.29</ll>
          <kl name="Sunflower">0.1</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.29</ll>
          <kl name="Lablab">0.1</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.29</ll>
          <kl name="Cotton">0.1</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.02</bd>
          <ll15>0.29</ll15>
          <airdry>0.29</airdry>
          <dul>0.54</dul>
          <sat>0.59</sat>
          <swcon>0.3</swcon>
          <fbiom>0.015</fbiom>
          <finert>0.8</finert>
          <oc>0.89</oc>
          <ph>9</ph>
          <ec>0.31</ec>
          <ll name="wheat">0.32</ll>
          <kl name="wheat">0.08</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.32</ll>
          <kl name="barley">0.08</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.32</ll>
          <kl name="canola">0.08</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.36</ll>
          <kl name="Chickpea">0.08</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.29</ll>
          <kl name="Lucerne">0.1</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.34</ll>
          <kl name="Maize">0.1</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.39</ll>
          <kl name="Perennial Grass">0.1</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.35</ll>
          <kl name="Sorghum">0.1</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.32</ll>
          <kl name="Cowpea">0.08</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.32</ll>
          <kl name="Fababean">0.08</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.32</ll>
          <kl name="Mungbean">0.08</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.32</ll>
          <kl name="Navybean">0.08</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.32</ll>
          <kl name="Peanut">0.08</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.32</ll>
          <kl name="Pigeonpea">0.08</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.32</ll>
          <kl name="Soybean">0.08</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.32</ll>
          <kl name="Stylo">0.08</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.32</ll>
          <kl name="Sugar">0.08</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.32</ll>
          <kl name="Sunflower">0.08</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.32</ll>
          <kl name="Lablab">0.08</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.35</ll>
          <kl name="Cotton">0.1</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.02</bd>
          <ll15>0.29</ll15>
          <airdry>0.29</airdry>
          <dul>0.54</dul>
          <sat>0.58</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.9</finert>
          <oc>0.89</oc>
          <ph>9.2</ph>
          <ec>0.4</ec>
          <ll name="wheat">0.32</ll>
          <kl name="wheat">0.06</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.38</ll>
          <kl name="barley">0.06</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.32</ll>
          <kl name="canola">0.06</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.43</ll>
          <kl name="Chickpea">0.06</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.29</ll>
          <kl name="Lucerne">0.1</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.34</ll>
          <kl name="Maize">0.08</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.41</ll>
          <kl name="Perennial Grass">0.1</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.38</ll>
          <kl name="Sorghum">0.08</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.32</ll>
          <kl name="Cowpea">0.06</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.32</ll>
          <kl name="Fababean">0.06</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.32</ll>
          <kl name="Mungbean">0.06</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.32</ll>
          <kl name="Navybean">0.06</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.32</ll>
          <kl name="Peanut">0.06</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.32</ll>
          <kl name="Pigeonpea">0.06</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.32</ll>
          <kl name="Soybean">0.06</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.32</ll>
          <kl name="Stylo">0.06</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.32</ll>
          <kl name="Sugar">0.06</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.32</ll>
          <kl name="Sunflower">0.06</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.32</ll>
          <kl name="Lablab">0.06</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.36</ll>
          <kl name="Cotton">0.08</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.06</bd>
          <ll15>0.3</ll15>
          <airdry>0.3</airdry>
          <dul>0.52</dul>
          <sat>0.57</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.77</oc>
          <ph>9.2</ph>
          <ec>0.59</ec>
          <ll name="wheat">0.35</ll>
          <kl name="wheat">0.04</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.39</ll>
          <kl name="barley">0.04</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.35</ll>
          <kl name="canola">0.04</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.51</ll>
          <kl name="Chickpea">0.04</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.3</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.37</ll>
          <kl name="Maize">0.06</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.4</ll>
          <kl name="Perennial Grass">0.09</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.4</ll>
          <kl name="Sorghum">0.06</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.35</ll>
          <kl name="Cowpea">0.04</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.35</ll>
          <kl name="Fababean">0.04</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.35</ll>
          <kl name="Mungbean">0.04</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.35</ll>
          <kl name="Navybean">0.04</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.35</ll>
          <kl name="Peanut">0.04</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.35</ll>
          <kl name="Pigeonpea">0.04</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.35</ll>
          <kl name="Soybean">0.04</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.35</ll>
          <kl name="Stylo">0.04</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.35</ll>
          <kl name="Sugar">0.04</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.35</ll>
          <kl name="Sunflower">0.04</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.35</ll>
          <kl name="Lablab">0.04</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.38</ll>
          <kl name="Cotton">0.06</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.11</bd>
          <ll15>0.31</ll15>
          <airdry>0.31</airdry>
          <dul>0.5</dul>
          <sat>0.55</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.45</oc>
          <ph>9.1</ph>
          <ec>0.84</ec>
          <ll name="wheat">0.38</ll>
          <kl name="wheat">0.02</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.39</ll>
          <kl name="barley">0.02</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.38</ll>
          <kl name="canola">0.02</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.5</ll>
          <kl name="Chickpea">0.02</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.31</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.4</ll>
          <kl name="Maize">0.04</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.4</ll>
          <kl name="Perennial Grass">0.07</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.4</ll>
          <kl name="Sorghum">0.04</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.38</ll>
          <kl name="Cowpea">0.02</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.38</ll>
          <kl name="Fababean">0.02</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.38</ll>
          <kl name="Mungbean">0.02</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.38</ll>
          <kl name="Navybean">0.02</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.38</ll>
          <kl name="Peanut">0.02</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.38</ll>
          <kl name="Pigeonpea">0.02</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.38</ll>
          <kl name="Soybean">0.02</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.38</ll>
          <kl name="Stylo">0.02</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.38</ll>
          <kl name="Sugar">0.02</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.38</ll>
          <kl name="Sunflower">0.02</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.38</ll>
          <kl name="Lablab">0.02</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.39</ll>
          <kl name="Cotton">0.04</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.12</bd>
          <ll15>0.32</ll15>
          <airdry>0.32</airdry>
          <dul>0.5</dul>
          <sat>0.55</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.27</oc>
          <ph>9</ph>
          <ec>0.93</ec>
          <ll name="wheat">0.41</ll>
          <kl name="wheat">0.01</kl>
          <xf name="wheat">1</xf>
          <ll name="barley">0.41</ll>
          <kl name="barley">0.01</kl>
          <xf name="barley">1</xf>
          <ll name="canola">0.41</ll>
          <kl name="canola">0.01</kl>
          <xf name="canola">1</xf>
          <ll name="Chickpea">0.5</ll>
          <kl name="Chickpea">0.01</kl>
          <xf name="Chickpea">1</xf>
          <ll name="Lucerne">0.32</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.42</ll>
          <kl name="Maize">0.02</kl>
          <xf name="Maize">1</xf>
          <ll name="Perennial Grass">0.41</ll>
          <kl name="Perennial Grass">0.05</kl>
          <xf name="Perennial Grass">1</xf>
          <ll name="Sorghum">0.4</ll>
          <kl name="Sorghum">0.02</kl>
          <xf name="Sorghum">1</xf>
          <ll name="Cowpea">0.41</ll>
          <kl name="Cowpea">0.01</kl>
          <xf name="Cowpea">1</xf>
          <ll name="Fababean">0.41</ll>
          <kl name="Fababean">0.01</kl>
          <xf name="Fababean">1</xf>
          <ll name="Mungbean">0.41</ll>
          <kl name="Mungbean">0.01</kl>
          <xf name="Mungbean">1</xf>
          <ll name="Navybean">0.41</ll>
          <kl name="Navybean">0.01</kl>
          <xf name="Navybean">1</xf>
          <ll name="Peanut">0.41</ll>
          <kl name="Peanut">0.01</kl>
          <xf name="Peanut">1</xf>
          <ll name="Pigeonpea">0.41</ll>
          <kl name="Pigeonpea">0.01</kl>
          <xf name="Pigeonpea">1</xf>
          <ll name="Soybean">0.41</ll>
          <kl name="Soybean">0.01</kl>
          <xf name="Soybean">1</xf>
          <ll name="Stylo">0.41</ll>
          <kl name="Stylo">0.01</kl>
          <xf name="Stylo">1</xf>
          <ll name="Sugar">0.41</ll>
          <kl name="Sugar">0.01</kl>
          <xf name="Sugar">1</xf>
          <ll name="Sunflower">0.41</ll>
          <kl name="Sunflower">0.01</kl>
          <xf name="Sunflower">1</xf>
          <ll name="Lablab">0.41</ll>
          <kl name="Lablab">0.01</kl>
          <xf name="Lablab">1</xf>
          <ll name="Cotton">0.39</ll>
          <kl name="Cotton">0.02</kl>
          <xf name="Cotton">1</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.15</bd>
          <ll15>0.33</ll15>
          <airdry>0.33</airdry>
          <dul>0.48</dul>
          <sat>0.53</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.22</oc>
          <ph>9</ph>
          <ec>1.01</ec>
          <ll name="wheat">0.48</ll>
          <kl name="wheat">0</kl>
          <xf name="wheat">0</xf>
          <ll name="barley">0.48</ll>
          <kl name="barley">0</kl>
          <xf name="barley">0</xf>
          <ll name="canola">0.48</ll>
          <kl name="canola">0</kl>
          <xf name="canola">0</xf>
          <ll name="Chickpea">0.48</ll>
          <kl name="Chickpea">0</kl>
          <xf name="Chickpea">0</xf>
          <ll name="Lucerne">0.33</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.48</ll>
          <kl name="Maize">0</kl>
          <xf name="Maize">0</xf>
          <ll name="Perennial Grass">0.41</ll>
          <kl name="Perennial Grass">0</kl>
          <xf name="Perennial Grass">0</xf>
          <ll name="Sorghum">0.48</ll>
          <kl name="Sorghum">0</kl>
          <xf name="Sorghum">0</xf>
          <ll name="Cowpea">0.48</ll>
          <kl name="Cowpea">0</kl>
          <xf name="Cowpea">0</xf>
          <ll name="Fababean">0.48</ll>
          <kl name="Fababean">0</kl>
          <xf name="Fababean">0</xf>
          <ll name="Mungbean">0.48</ll>
          <kl name="Mungbean">0</kl>
          <xf name="Mungbean">0</xf>
          <ll name="Navybean">0.48</ll>
          <kl name="Navybean">0</kl>
          <xf name="Navybean">0</xf>
          <ll name="Peanut">0.48</ll>
          <kl name="Peanut">0</kl>
          <xf name="Peanut">0</xf>
          <ll name="Pigeonpea">0.48</ll>
          <kl name="Pigeonpea">0</kl>
          <xf name="Pigeonpea">0</xf>
          <ll name="Soybean">0.48</ll>
          <kl name="Soybean">0</kl>
          <xf name="Soybean">0</xf>
          <ll name="Stylo">0.48</ll>
          <kl name="Stylo">0</kl>
          <xf name="Stylo">0</xf>
          <ll name="Sugar">0.48</ll>
          <kl name="Sugar">0</kl>
          <xf name="Sugar">0</xf>
          <ll name="Sunflower">0.48</ll>
          <kl name="Sunflower">0</kl>
          <xf name="Sunflower">0</xf>
          <ll name="Lablab">0.48</ll>
          <kl name="Lablab">0</kl>
          <xf name="Lablab">0</xf>
          <ll name="Cotton">0.48</ll>
          <kl name="Cotton">0</kl>
          <xf name="Cotton">0</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.18</bd>
          <ll15>0.34</ll15>
          <airdry>0.34</airdry>
          <dul>0.47</dul>
          <sat>0.52</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.16</oc>
          <ph>8.9</ph>
          <ec>1.06</ec>
          <ll name="wheat">0.47</ll>
          <kl name="wheat">0</kl>
          <xf name="wheat">0</xf>
          <ll name="barley">0.47</ll>
          <kl name="barley">0</kl>
          <xf name="barley">0</xf>
          <ll name="canola">0.47</ll>
          <kl name="canola">0</kl>
          <xf name="canola">0</xf>
          <ll name="Chickpea">0.47</ll>
          <kl name="Chickpea">0</kl>
          <xf name="Chickpea">0</xf>
          <ll name="Lucerne">0.34</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.47</ll>
          <kl name="Maize">0</kl>
          <xf name="Maize">0</xf>
          <ll name="Perennial Grass">0.4</ll>
          <kl name="Perennial Grass">0</kl>
          <xf name="Perennial Grass">0</xf>
          <ll name="Sorghum">0.47</ll>
          <kl name="Sorghum">0</kl>
          <xf name="Sorghum">0</xf>
          <ll name="Cowpea">0.47</ll>
          <kl name="Cowpea">0</kl>
          <xf name="Cowpea">0</xf>
          <ll name="Fababean">0.47</ll>
          <kl name="Fababean">0</kl>
          <xf name="Fababean">0</xf>
          <ll name="Mungbean">0.47</ll>
          <kl name="Mungbean">0</kl>
          <xf name="Mungbean">0</xf>
          <ll name="Navybean">0.47</ll>
          <kl name="Navybean">0</kl>
          <xf name="Navybean">0</xf>
          <ll name="Peanut">0.47</ll>
          <kl name="Peanut">0</kl>
          <xf name="Peanut">0</xf>
          <ll name="Pigeonpea">0.47</ll>
          <kl name="Pigeonpea">0</kl>
          <xf name="Pigeonpea">0</xf>
          <ll name="Soybean">0.47</ll>
          <kl name="Soybean">0</kl>
          <xf name="Soybean">0</xf>
          <ll name="Stylo">0.47</ll>
          <kl name="Stylo">0</kl>
          <xf name="Stylo">0</xf>
          <ll name="Sugar">0.47</ll>
          <kl name="Sugar">0</kl>
          <xf name="Sugar">0</xf>
          <ll name="Sunflower">0.47</ll>
          <kl name="Sunflower">0</kl>
          <xf name="Sunflower">0</xf>
          <ll name="Lablab">0.47</ll>
          <kl name="Lablab">0</kl>
          <xf name="Lablab">0</xf>
          <ll name="Cotton">0.47</ll>
          <kl name="Cotton">0</kl>
          <xf name="Cotton">0</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.2</bd>
          <ll15>0.35</ll15>
          <airdry>0.35</airdry>
          <dul>0.46</dul>
          <sat>0.51</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.13</oc>
          <ph>8.9</ph>
          <ec>1.05</ec>
          <ll name="wheat">0.46</ll>
          <kl name="wheat">0</kl>
          <xf name="wheat">0</xf>
          <ll name="barley">0.46</ll>
          <kl name="barley">0</kl>
          <xf name="barley">0</xf>
          <ll name="canola">0.46</ll>
          <kl name="canola">0</kl>
          <xf name="canola">0</xf>
          <ll name="Chickpea">0.46</ll>
          <kl name="Chickpea">0</kl>
          <xf name="Chickpea">0</xf>
          <ll name="Lucerne">0.35</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.46</ll>
          <kl name="Maize">0</kl>
          <xf name="Maize">0</xf>
          <ll name="Perennial Grass">0.4</ll>
          <kl name="Perennial Grass">0</kl>
          <xf name="Perennial Grass">0</xf>
          <ll name="Sorghum">0.46</ll>
          <kl name="Sorghum">0</kl>
          <xf name="Sorghum">0</xf>
          <ll name="Cowpea">0.46</ll>
          <kl name="Cowpea">0</kl>
          <xf name="Cowpea">0</xf>
          <ll name="Fababean">0.46</ll>
          <kl name="Fababean">0</kl>
          <xf name="Fababean">0</xf>
          <ll name="Mungbean">0.46</ll>
          <kl name="Mungbean">0</kl>
          <xf name="Mungbean">0</xf>
          <ll name="Navybean">0.46</ll>
          <kl name="Navybean">0</kl>
          <xf name="Navybean">0</xf>
          <ll name="Peanut">0.46</ll>
          <kl name="Peanut">0</kl>
          <xf name="Peanut">0</xf>
          <ll name="Pigeonpea">0.46</ll>
          <kl name="Pigeonpea">0</kl>
          <xf name="Pigeonpea">0</xf>
          <ll name="Soybean">0.46</ll>
          <kl name="Soybean">0</kl>
          <xf name="Soybean">0</xf>
          <ll name="Stylo">0.46</ll>
          <kl name="Stylo">0</kl>
          <xf name="Stylo">0</xf>
          <ll name="Sugar">0.46</ll>
          <kl name="Sugar">0</kl>
          <xf name="Sugar">0</xf>
          <ll name="Sunflower">0.46</ll>
          <kl name="Sunflower">0</kl>
          <xf name="Sunflower">0</xf>
          <ll name="Lablab">0.46</ll>
          <kl name="Lablab">0</kl>
          <xf name="Lablab">0</xf>
          <ll name="Cotton">0.46</ll>
          <kl name="Cotton">0</kl>
          <xf name="Cotton">0</xf>
        </layer>
        <layer>
          <thickness>300</thickness>
          <bd>1.25</bd>
          <ll15>0.36</ll15>
          <airdry>0.36</airdry>
          <dul>0.44</dul>
          <sat>0.49</sat>
          <swcon>0.3</swcon>
          <fbiom>0.01</fbiom>
          <finert>0.95</finert>
          <oc>0.12</oc>
          <ph>8.9</ph>
          <ec>1.01</ec>
          <ll name="wheat">0.44</ll>
          <kl name="wheat">0</kl>
          <xf name="wheat">0</xf>
          <ll name="barley">0.44</ll>
          <kl name="barley">0</kl>
          <xf name="barley">0</xf>
          <ll name="canola">0.44</ll>
          <kl name="canola">0</kl>
          <xf name="canola">0</xf>
          <ll name="Chickpea">0.44</ll>
          <kl name="Chickpea">0</kl>
          <xf name="Chickpea">0</xf>
          <ll name="Lucerne">0.36</ll>
          <kl name="Lucerne">0.09</kl>
          <xf name="Lucerne">1</xf>
          <ll name="Maize">0.44</ll>
          <kl name="Maize">0</kl>
          <xf name="Maize">0</xf>
          <ll name="Perennial Grass">0.42</ll>
          <kl name="Perennial Grass">0</kl>
          <xf name="Perennial Grass">0</xf>
          <ll name="Sorghum">0.44</ll>
          <kl name="Sorghum">0</kl>
          <xf name="Sorghum">0</xf>
          <ll name="Cowpea">0.44</ll>
          <kl name="Cowpea">0</kl>
          <xf name="Cowpea">0</xf>
          <ll name="Fababean">0.44</ll>
          <kl name="Fababean">0</kl>
          <xf name="Fababean">0</xf>
          <ll name="Mungbean">0.44</ll>
          <kl name="Mungbean">0</kl>
          <xf name="Mungbean">0</xf>
          <ll name="Navybean">0.44</ll>
          <kl name="Navybean">0</kl>
          <xf name="Navybean">0</xf>
          <ll name="Peanut">0.44</ll>
          <kl name="Peanut">0</kl>
          <xf name="Peanut">0</xf>
          <ll name="Pigeonpea">0.44</ll>
          <kl name="Pigeonpea">0</kl>
          <xf name="Pigeonpea">0</xf>
          <ll name="Soybean">0.44</ll>
          <kl name="Soybean">0</kl>
          <xf name="Soybean">0</xf>
          <ll name="Stylo">0.44</ll>
          <kl name="Stylo">0</kl>
          <xf name="Stylo">0</xf>
          <ll name="Sugar">0.44</ll>
          <kl name="Sugar">0</kl>
          <xf name="Sugar">0</xf>
          <ll name="Sunflower">0.44</ll>
          <kl name="Sunflower">0</kl>
          <xf name="Sunflower">0</xf>
          <ll name="Lablab">0.44</ll>
          <kl name="Lablab">0</kl>
          <xf name="Lablab">0</xf>
          <ll name="Cotton">0.44</ll>
          <kl name="Cotton">0</kl>
          <xf name="Cotton">0</xf>
        </layer>
      </profile>
      <U>6</U>
      <Cona>3.5</Cona>
      <Salb>0.13</Salb>
      <DiffusConst>40</DiffusConst>
      <DiffusSlope>16</DiffusSlope>
      <CN2Bare>73</CN2Bare>
      <CNRed>20</CNRed>
      <CNCov>0.8</CNCov>
      <RootCN>40</RootCN>
      <RootWT>200</RootWT>
      <SoilCN>12.5</SoilCN>
      <EnrACoeff>7.4</EnrACoeff>
      <EnrBCoeff>0.2</EnrBCoeff>
      <WaterFormat>VolumetricPercent</WaterFormat>
      <InitWater>
        <profile>
          <layer>
            <sw>0.540</sw>
            <thickness>150</thickness>
          </layer>
          <layer>
            <sw>0.530</sw>
            <thickness>150</thickness>
          </layer>
          <layer>
            <sw>0.540</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.540</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.520</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.500</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.500</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.480</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.470</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.460</sw>
            <thickness>300</thickness>
          </layer>
          <layer>
            <sw>0.440</sw>
            <thickness>300</thickness>
          </layer>
        </profile>
      </InitWater>
      <InitNitrogen>
        <profile>
          <layer>
            <no3>6.500</no3>
            <nh4>0.600</nh4>
            <thickness>150</thickness>
          </layer>
          <layer>
            <no3>2.100</no3>
            <nh4>0.100</nh4>
            <thickness>150</thickness>
          </layer>
          <layer>
            <no3>2.100</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
          <layer>
            <no3>1.700</no3>
            <nh4>0.100</nh4>
            <thickness>300</thickness>
          </layer>
        </profile>
      </InitNitrogen>
    </soil>
  </simulation>
  <simulation name="Bambatsi Pasture">
    <metfile name="met">
      <filename name="filename">C:\Program Files\Apsim53\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date" lbound="1/01/1940" ubound="31/12/1989">1/01/1970</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date" lbound="1/01/1940" ubound="31/12/1989">31/12/1974</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="Planting rule">
          <condition name="start_of_day">
         if (date('[date1]') = today) and [crop].plant_status = 'out' then
               [crop]  establish plants =[density], init_section = seedling
         endif
            </condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter planting date (dd-mmm) : ">1-feb</date1>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of growth module to sow : ">bambatsi</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">400</density>
          </category>
        </rule>
        <rule name="Establishment fertiliser">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="For which module is fertiliser applied : ">bambatsi</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">establishing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
        <rule name="Cutting rule">
          <condition name="start_of_day"><![CDATA[
         if ([crop].biomass > [hmass] and [crop].plant_status = 'alive' then
               [crop]  cut foliage_remove_fr = [ffraction], adm_remove_fr = [sfraction]
         endif
            ]]></condition>
          <category name="Cutting criteria">
            <hmass type="text" description="Enter critical biomass for harvest (kg/ha) : ">2000.</hmass>
          </category>
          <category name="Cutting parameters">
            <crop type="crop" description="Enter name of growth module to cut : ">bambatsi</crop>
            <ffraction type="text" description="Enter fraction of foliage removed  (0-1) : ">0.9</ffraction>
            <sfraction type="text" description="Enter fraction of stem removed  (0-1) : ">0.9</sfraction>
          </category>
        </rule>
      </manager>
      <micromet name="Micromet">
        <soilalbedo name="soilalbedo">0.23</soilalbedo>
        <a_interception name="a_interception">0.0</a_interception>
        <b_interception name="b_interception">0.0</b_interception>
        <c_interception name="c_interception">0.0</c_interception>
        <d_interception name="d_interception">0.0</d_interception>
      </micromet>
      <fertiliser name="fertiliser" />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">1000.</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="biomass" description="" array="" units="kg/ha" />
          <variable name="lai" description="" array="" units="kg/ha" />
        </variables>
        <events name="Reporting Frequency">
          <event name="Daily" description="End of day" array="No" />
        </events>
      </outputfile>
      <soil name="Jimbour,Waco (#016)">
        <Site>Jimbour</Site>
        <Region>South East Queensland</Region>
        <LocalName>Waco</LocalName>
        <SoilType>Black Vertosol</SoilType>
        <NearestTown>Jimbour, Q 4352</NearestTown>
        <NaturalVegetation>Grassland, mainly Qld bluegrass</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.15</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>1.04</oc>
            <ph>8.4</ph>
            <fbiom>0.025</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <ec>0.2</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.29</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.03</bd>
            <ll15>0.29</ll15>
            <airdry>0.26</airdry>
            <dul>0.53</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>8.8</ph>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.25</ec>
            <ll name="Barley">0.29</ll>
            <kl name="Barley">0.1</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.29</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.29</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.29</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.29</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.29</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.59</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <ec>0.31</ec>
            <ll name="Barley">0.32</ll>
            <kl name="Barley">0.08</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.36</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.1</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.39</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.35</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.34</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.02</bd>
            <ll15>0.29</ll15>
            <airdry>0.29</airdry>
            <dul>0.54</dul>
            <sat>0.58</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.89</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.4</ec>
            <ll name="Barley">0.38</ll>
            <kl name="Barley">0.06</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.43</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.29</ll>
            <kl name="Lucerne">0.1</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.34</ll>
            <kl name="Maize">0.08</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.1</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.38</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.32</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.34</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.06</bd>
            <ll15>0.3</ll15>
            <airdry>0.3</airdry>
            <dul>0.52</dul>
            <sat>0.57</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.77</oc>
            <ph>9.2</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.59</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.04</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.51</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.3</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.37</ll>
            <kl name="Maize">0.06</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.09</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.35</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.37</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.11</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.45</oc>
            <ph>9.1</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.84</ec>
            <ll name="Barley">0.39</ll>
            <kl name="Barley">0.02</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.31</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.4</ll>
            <kl name="Maize">0.04</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0.07</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.4</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.12</bd>
            <ll15>0.32</ll15>
            <airdry>0.32</airdry>
            <dul>0.5</dul>
            <sat>0.55</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.27</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>0.93</ec>
            <ll name="Barley">0.41</ll>
            <kl name="Barley">0.01</kl>
            <xf name="Barley">1</xf>
            <ll name="Chickpea">0.5</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Lucerne">0.32</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.42</ll>
            <kl name="Maize">0.02</kl>
            <xf name="Maize">1</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0.05</kl>
            <xf name="Perennial Grass">1</xf>
            <ll name="Sorghum">0.4</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.41</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
            <ll name="bambatsi">0.42</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.15</bd>
            <ll15>0.33</ll15>
            <airdry>0.33</airdry>
            <dul>0.48</dul>
            <sat>0.53</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.22</oc>
            <ph>9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.48</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.48</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.33</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.48</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.41</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.48</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.48</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="bambatsi">0.48</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.18</bd>
            <ll15>0.34</ll15>
            <airdry>0.34</airdry>
            <dul>0.47</dul>
            <sat>0.52</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.16</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.06</ec>
            <ll name="Barley">0.47</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.47</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.34</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.47</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.47</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.47</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="bambatsi">0.47</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.2</bd>
            <ll15>0.35</ll15>
            <airdry>0.35</airdry>
            <dul>0.46</dul>
            <sat>0.51</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.13</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.05</ec>
            <ll name="Barley">0.46</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.46</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.35</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.46</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.4</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.46</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.46</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="bambatsi">0.46</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.25</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.44</dul>
            <sat>0.49</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <oc>0.12</oc>
            <ph>8.9</ph>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <ec>1.01</ec>
            <ll name="Barley">0.44</ll>
            <kl name="Barley">0</kl>
            <xf name="Barley">0</xf>
            <ll name="Chickpea">0.44</ll>
            <kl name="Chickpea">0</kl>
            <xf name="Chickpea">0</xf>
            <ll name="Lucerne">0.36</ll>
            <kl name="Lucerne">0.09</kl>
            <xf name="Lucerne">1</xf>
            <ll name="Maize">0.44</ll>
            <kl name="Maize">0</kl>
            <xf name="Maize">0</xf>
            <ll name="Perennial Grass">0.42</ll>
            <kl name="Perennial Grass">0</kl>
            <xf name="Perennial Grass">0</xf>
            <ll name="Sorghum">0.44</ll>
            <kl name="Sorghum">0</kl>
            <xf name="Sorghum">0</xf>
            <ll name="Wheat">0.44</ll>
            <kl name="Wheat">0</kl>
            <xf name="Wheat">0</xf>
            <ll name="bambatsi">0.44</ll>
            <kl name="bambatsi">0.06</kl>
            <xf name="bambatsi">0</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.503</no3>
              <nh4>0.599</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.101</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.701</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
      <bambatsi />
    </area>
  </simulation>
  <simulation name="Rotation Sample">
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date">31/12/1950</end_date>
    </clock>
    <summaryfile name="summaryfile">
      <filename name="filename">Rotation Sample.sum</filename>
    </summaryfile>
    <area name="paddock">
      <registrations name="global" />
      <manager name="Manager">
        <rule name="CottonSowing">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants_pm =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">10-Oct</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-Dec</date2>
            <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">10</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">100</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">cotton</crop>
            <density type="text" description="Enter sowing density  (plants/m row) : ">10</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">Siok</cultivar>
            <row_spacing type="text" description="Enter row spacing (mm) : ">1000</row_spacing>
            <skip type="text" description="Enter Skip Row (0=solid, 1=single, 2=double) : ">0</skip>
          </category>
        </rule>
        <rule name="ChickPeaSowing">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing], crop_class = [class]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">25</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">50</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">chickpea</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">25</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">amethyst</cultivar>
            <class type="classes" croppropertyname="crop" description="Enter crop growth class : ">plant</class>
            <row_spacing type="text" description="Enter row spacing (mm) : ">500</row_spacing>
          </category>
        </rule>
        <rule name="WheatSowing">
          <condition name="start_of_day"><![CDATA[
      if (paddock_is_fallow() = 1 and FallowIn <> 'yes' and (NextCrop = 0 or NextCrop = '[crop]')) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit] AND esw >= [esw_amount]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN
               ChooseNextCrop = 'yes'   ! for rotations
               [crop] sow plants =[density], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [row_spacing], crop_class = [class]
            endif
            if today = date('[date2]') then
               ChooseNextCrop = 'yes'
            endif
         endif
      endif
            ]]></condition>
          <category name="Sowing criteria">
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">25</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">50</esw_amount>
          </category>
          <category name="Sowing parameters">
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <density type="text" description="Enter sowing density  (plants/m2) : ">100</density>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" croppropertyname="crop" description="Enter cultivar : ">hartog</cultivar>
            <class type="classes" croppropertyname="crop" description="Enter crop growth class : ">plant</class>
            <row_spacing type="text" description="Enter row spacing (mm) : ">250</row_spacing>
          </category>
        </rule>
        <rule name="CottonHarvesting">
          <condition name="end_of_day"><![CDATA[

           if (ozcot_status > 0) then
              [crop]  harvest

           endif

            ]]></condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">cotton</crop>
          </category>
        </rule>
        <rule name="ChickPeaHarvesting">
          <condition name="end_of_day">

           if [crop].stage_name = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
           endif

            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">chickpea</crop>
          </category>
        </rule>
        <rule name="WheatHarvesting">
          <condition name="end_of_day">

           if [crop].stage_name = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
           endif

            </condition>
          <category name="Harvesting criteria">
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">wheat</crop>
          </category>
        </rule>
        <rule name="Fertilise at sowing">
          <condition name="[modulename].[eventname]">
        [fertmodule] apply amount = [fert_amount_sow] (kg/ha), depth = 50 (mm), type = [fert_type_sow]
            </condition>
          <category name="When should fertiliser be applied">
            <modulename type="modulename" description="On which module should the event come from : ">wheat</modulename>
            <eventname type="text" description="On which event should fertiliser be applied : ">sowing</eventname>
          </category>
          <category name="Fertiliser application details">
            <fertmodule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</fertmodule>
            <fert_amount_sow type="text" description="Amount of starter fertiliser at sowing (kg/ha) : ">150</fert_amount_sow>
            <fert_type_sow type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Sowing fertiliser type : ">urea_N</fert_type_sow>
          </category>
        </rule>
        <rule name="Rotations">
          <condition name="init">
         NextCropIndex = 1
         NextCrop = ' '
         ChooseNextCrop = 'yes'
         SummerFallowIn = 'no'
         WinterFallowIn = 'no'
         FallowIn = 'no'
      </condition>
          <condition name="start_of_day">
      if (ChooseNextCrop = 'yes') then
         if (NextCropIndex = 1) then
            NextCrop = '[crop1]'
         elseif (NextCropIndex = 2) then
            NextCrop = '[crop2]'
         elseif (NextCropIndex = 3) then
            NextCrop = '[crop3]'
         elseif (NextCropIndex = 4) then
            NextCrop = '[crop4]'
         elseif (NextCropIndex = 5) then
            NextCrop = '[crop5]'
         elseif (NextCropIndex = 6) then
            NextCrop = '[crop6]'
         elseif (NextCropIndex = 7) then
            NextCrop = '[crop7]'
         elseif (NextCropIndex = 8) then
            NextCrop = '[crop8]'
         elseif (NextCropIndex = 9) then
            NextCrop = '[crop9]'
         elseif (NextCropIndex = 10) then
            NextCrop = '[crop10]'
         elseif (NextCropIndex = 11) then
            NextCrop = '[crop11]'
         elseif (NextCropIndex = 12) then
            NextCrop = '[crop12]'
         elseif (NextCropIndex = 13) then
            NextCrop = '[crop13]'
         elseif (NextCropIndex = 14) then
            NextCrop = '[crop14]'
         elseif (NextCropIndex = 15) then
            NextCrop = '[crop15]'
         elseif (NextCropIndex = 16) then
            NextCrop = '[crop16]'
         elseif (NextCropIndex = 17) then
            NextCrop = '[crop17]'
         elseif (NextCropIndex = 18) then
            NextCrop = '[crop18]'
         elseif (NextCropIndex = 19) then
            NextCrop = '[crop19]'
         elseif (NextCropIndex = 20) then
            NextCrop = '[crop20]'
         endif
         if (NextCrop = 'nil' or NextCrop = ' ') then
            NextCrop = '[crop1]'
            NextCropIndex = 1
         endif
         NextCropIndex = NextCropIndex + 1
         ChooseNextCrop = 'no'
      endif
      ! if the next crop is due to be a fallow and we're within the
      ! correct date range then put a fallow in.
      if (NextCrop = '[WinterFallowName]') then
         if (paddock_is_fallow() = 1 and FallowIn = 'no') then
            if (date_within('[SummerFallowEndDate], [WinterFallowEndDate]') then
               WinterFallowIn = 'yes'
               FallowIn = 'yes'
               ChooseNextCrop = 'yes'
            endif
         endif
      elseif (NextCrop = '[SummerFallowName]') then
         if (paddock_is_fallow() = 1 and FallowIn = 'no') then
            if (date_within('[WinterFallowEndDate], [SummerFallowEndDate]') then
               SummerFallowIn = 'yes'
               FallowIn = 'yes'
               ChooseNextCrop = 'yes'
            endif
         endif
      endif

      ! if we currently have a fallow in and we're at the end of the fallow window
      ! then remove the fallow.
      if (WinterFallowIn = 'yes' and today = date('[WinterFallowEndDate]')+1) then
         WinterFallowIn = 'no'
         FallowIn = 'no'
      endif
      if (SummerFallowIn = 'yes' and today = date('[SummerFallowEndDate]')+1) then
         SummerFallowIn = 'no'
         FallowIn = 'no'
      endif
      </condition>
          <category name="Fallow options">
            <SummerFallowName type="text" description="Enter summer fallow name : ">sf</SummerFallowName>
            <SummerFallowEndDate type="text" description="Enter summer fallow END date (dd-mmm) : ">15-mar</SummerFallowEndDate>
            <WinterFallowName type="text" description="Enter winter fallow name : ">wf</WinterFallowName>
            <WinterFallowEndDate type="text" description="Enter winter fallow END date (dd-mmm) : ">23-aug</WinterFallowEndDate>
          </category>
          <category name="Crop rotation sequence">
            <crop1 type="crop" description="Enter 1st crop : ">cotton</crop1>
            <crop2 type="crop" description="Enter 2nd crop : ">chickpea</crop2>
            <crop3 type="crop" description="Enter 3rd crop : ">sf</crop3>
            <crop4 type="crop" description="Enter 4th crop : ">wheat</crop4>
            <crop5 type="crop" description="Enter 5th crop : ">sf</crop5>
            <crop6 type="crop" description="Enter 6th crop : ">wf</crop6>
            <crop7 type="crop" description="Enter 7th crop : ">nil</crop7>
            <crop8 type="crop" description="Enter 8th crop : ">nil</crop8>
            <crop9 type="crop" description="Enter 9th crop : ">nil</crop9>
            <crop10 type="crop" description="Enter 10th crop : ">nil</crop10>
            <crop11 type="crop" description="Enter 11th crop : ">nil</crop11>
            <crop12 type="crop" description="Enter 12th crop : ">nil</crop12>
            <crop13 type="crop" description="Enter 13th crop : ">nil</crop13>
            <crop14 type="crop" description="Enter 14th crop : ">nil</crop14>
            <crop15 type="crop" description="Enter 15th crop : ">nil</crop15>
            <crop16 type="crop" description="Enter 16th crop : ">nil</crop16>
            <crop17 type="crop" description="Enter 17th crop : ">nil</crop17>
            <crop18 type="crop" description="Enter 18th crop : ">nil</crop18>
            <crop19 type="crop" description="Enter 19th crop : ">nil</crop19>
            <crop20 type="crop" description="Enter 20th crop : ">nil</crop20>
          </category>
        </rule>
      </manager>
      <wheat />
      <cotton name="cotton" />
      <chickpea />
      <surfaceom name="surface organic matter">
        <PoolName description="Organic Matter pool name">wheat_stubble</PoolName>
        <type type="list" description="Organic Matter type" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat">wheat</type>
        <mass description="Initial surface residue (kg/ha)">1000.</mass>
        <cnr description="C:N ratio of initial residue">80.0</cnr>
        <standing_fraction description="Fraction of residue standing">0.0</standing_fraction>
      </surfaceom>
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="cotton.dm as Cotton.Biomass" description="Total above ground biomass (kg/ha)" array="?" />
          <variable name="biomass" description="Biomass" array="No" />
          <variable name="lai" description="Leaf area index" array="No" />
        </variables>
        <events name="Reporting Frequency">
          <event name="Daily" description="End of day" />
        </events>
      </outputfile>
      <fertiliser name="fertiliser" />
      <soil name="#009 - Kupunn">
        <Site>Kupunn</Site>
        <Region>South East Queensland</Region>
        <LocalName>Brigalow</LocalName>
        <SoilType>Grey Vertosol</SoilType>
        <NearestTown>Dalby, Q 4405</NearestTown>
        <NaturalVegetation>Brigalow, belah, wilga</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.4</bd>
            <ll15>0.21</ll15>
            <airdry>0.105</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.03</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <oc>1.24</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.21</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.21</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.21</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.21</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.39</bd>
            <ll15>0.21</ll15>
            <airdry>0.189</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <oc>1.24</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.21</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.21</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.21</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.21</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.37</bd>
            <ll15>0.22</ll15>
            <airdry>0.22</airdry>
            <dul>0.4</dul>
            <sat>0.45</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <oc>1.25</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.22</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.22</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.26</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.25</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.36</bd>
            <ll15>0.25</ll15>
            <airdry>0.25</airdry>
            <dul>0.41</dul>
            <sat>0.46</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>1.1</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.27</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.25</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.26</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.28</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.38</bd>
            <ll15>0.27</ll15>
            <airdry>0.27</airdry>
            <dul>0.4</dul>
            <sat>0.45</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.71</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.27</ll>
            <kl name="Cotton">0.09</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.28</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.31</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.39</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.34</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.34</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.31</ll>
            <kl name="Cotton">0.07</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.34</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.37</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.42</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.38</dul>
            <sat>0.43</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.26</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.38</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.36</ll>
            <kl name="Cotton">0.05</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.36</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <Comment>oc and ph not measured</Comment>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.500</no3>
              <nh4>0.600</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
  <simulation name="Rotation Sample (Directed Graph)">
    <clock name="clock">
      <start_date name="start_date" description="Select the start date of the simulation" type="date" lbound="1/01/1940" ubound="31/12/1989">1/01/1940</start_date>
      <end_date name="end_date" description="Select the end date of the simulation" type="date" lbound="1/01/1940" ubound="31/12/1989">31/12/1950</end_date>
    </clock>
    <summaryfile name="summaryfile">
    </summaryfile>
    <metfile name="met">
      <filename name="filename">%apsuite\apsim\met\sample\goond.met</filename>
    </metfile>
    <area name="Paddock">
      <registrations name="global" />
      <tclmanager name="Manager">
        <tclui name="Rotation Initialisation">
          <rule name="Sample Rotation 1 Rotation Initialisation.out - Rotation Initialisation UI1" condition="init" invisible="yes">
          <![CDATA[source $apsuite/apsim/tcllink/lib/RotationInitialisation.tcl
set state "WinterFallow"
]]></rule>
          <rule name="Sample Rotation 1 Rotation Initialisation.out - Rotation Initialisation UI2" condition="process" invisible="yes"><![CDATA[checkSetup
doProcess
]]></rule>
          <rule name="Sample Rotation 1 Rotation Initialisation.out - Rotation Initialisation UI3" condition="exit" invisible="yes"><![CDATA[exit
]]></rule>
          <uiscript><![CDATA[source $apsuite/apsim/tcllink/lib/RotationInitialisationUI.tcl]]></uiscript>
          <initialState>WinterFallow</initialState>
          <simpleLogging>0</simpleLogging>
        </tclui>
        <tclui name="Rotation Management">
          <uiscript><![CDATA[source $apsuite/apsim/tcllink/lib/RotationsUI.tcl]]></uiscript>
          <canvas_height>496</canvas_height>
          <rules_height>40</rules_height>
          <node>
            <x1>238.0</x1>
            <name>SummerFallow2</name>
            <y1>325.0</y1>
            <x2>338.0</x2>
            <desc>New state</desc>
            <fill>gray</fill>
            <y2>425.0</y2>
          </node>
          <node>
            <x1>560.0</x1>
            <name>Chickpea</name>
            <y1>21.0</y1>
            <x2>660.0</x2>
            <desc>Chickpea</desc>
            <fill>lightgreen</fill>
            <y2>121.0</y2>
          </node>
          <node>
            <x1>445.0</x1>
            <name>Wheat</name>
            <y1>326.0</y1>
            <x2>545.0</x2>
            <desc>Wheat Crop</desc>
            <fill>darkgreen</fill>
            <y2>426.0</y2>
          </node>
          <node>
            <x1>180.0</x1>
            <name>WinterFallow</name>
            <y1>192.0</y1>
            <x2>280.0</x2>
            <desc>New state</desc>
            <fill>gray</fill>
            <y2>292.0</y2>
          </node>
          <node>
            <x1>508.0</x1>
            <name>SummerFallow1</name>
            <y1>195.0</y1>
            <x2>608.0</x2>
            <desc>New state</desc>
            <fill>maroon</fill>
            <y2>295.0</y2>
          </node>
          <node>
            <x1>368.0</x1>
            <name>F1</name>
            <y1>4.0</y1>
            <x2>468.0</x2>
            <desc>New state</desc>
            <fill>gray</fill>
            <y2>104.0</y2>
          </node>
          <node>
            <x1>204.0</x1>
            <name>Cotton</name>
            <y1>32.0</y1>
            <x2>304.0</x2>
            <desc>A Cotton Crop</desc>
            <fill>purple</fill>
            <y2>132.0</y2>
          </node>
          <arc>
            <name>arc2</name>
            <source>SummerFallow1</source>
            <target>WinterFallow</target>
            <x>388.5</x>
            <y>362.0</y>
            <rules>[apsimGet day]  == 192</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc6</name>
            <source>WinterFallow</source>
            <target>Cotton</target>
            <x>197.5</x>
            <actions>sow_cotton</actions>
            <y>155.5</y>
            <rules>[canPlant_cotton]</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc3</name>
            <source>Wheat</source>
            <target>SummerFallow2</target>
            <x>394.0</x>
            <actions>apsimSendMessage wheat harvest</actions>
            <actions>apsimSendMessage wheat end_crop</actions>
            <y>416.5</y>
            <rules>{[apsimGet wheat.stage_name] == "harvest_ripe" || [apsimGet wheat.plant_status] == "dead"}</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc7</name>
            <source>F1</source>
            <target>SummerFallow1</target>
            <x>542.5</x>
            <y>78.0</y>
            <rules>[apsimGet day]  == 192</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc0</name>
            <source>F1</source>
            <target>Chickpea</target>
            <x>500.0</x>
            <actions>sow_chickpea</actions>
            <y>29.0</y>
            <rules>[canPlant_chickpea]</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc8</name>
            <source>Chickpea</source>
            <target>SummerFallow1</target>
            <x>633.0</x>
            <actions>apsimSendMessage chickpea harvest</actions>
            <actions>apsimSendMessage chickpea end_crop</actions>
            <y>162.5</y>
            <rules>{[apsimGet chickpea.stage_name] == "harvest_ripe" || [apsimGet chickpea.plant_status] == "dead"}</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc1</name>
            <source>SummerFallow1</source>
            <target>Wheat</target>
            <x>550.5</x>
            <actions>sow_wheat</actions>
            <y>321.5</y>
            <rules>[canPlant_wheat]</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc5</name>
            <source>Cotton</source>
            <target>F1</target>
            <x>326.5</x>
            <actions>apsimSendMessage cotton harvest</actions>
            <y>37.5</y>
            <rules>[apsimGet ozcot_status] &gt; 0</rules>
            <rules />
            <actions />
          </arc>
          <arc>
            <name>arc9</name>
            <source>SummerFallow2</source>
            <target>WinterFallow</target>
            <x>244.0</x>
            <y>319.5</y>
            <rules>[apsimGet day]  == 74</rules>
            <rules />
            <actions />
          </arc>
          <rule name="Init rule" invisible="yes" condition="init"><![CDATA[package require struct
::struct::graph stateGraph
stateGraph node insert "SummerFallow2"
set colour(SummerFallow2) "gray"
stateGraph node insert "Chickpea"
set colour(Chickpea) "lightgreen"
stateGraph node insert "Wheat"
set colour(Wheat) "darkgreen"
stateGraph node insert "WinterFallow"
set colour(WinterFallow) "gray"
stateGraph node insert "SummerFallow1"
set colour(SummerFallow1) "maroon"
stateGraph node insert "F1"
set colour(F1) "gray"
stateGraph node insert "Cotton"
set colour(Cotton) "purple"
stateGraph arc insert "SummerFallow1" "WinterFallow" "arc2"
stateGraph arc lappend "arc2" rules {[apsimGet day]  == 192}
stateGraph arc lappend "arc2" actions {}
stateGraph arc insert "WinterFallow" "Cotton" "arc6"
stateGraph arc lappend "arc6" actions {sow_cotton}
stateGraph arc lappend "arc6" rules {[canPlant_cotton]}
stateGraph arc lappend "arc6" actions {}
stateGraph arc insert "Wheat" "SummerFallow2" "arc3"
stateGraph arc lappend "arc3" actions {apsimSendMessage wheat harvest}
stateGraph arc lappend "arc3" actions {apsimSendMessage wheat end_crop}
stateGraph arc lappend "arc3" rules {{[apsimGet wheat.stage_name] == "harvest_ripe" || [apsimGet wheat.plant_status] == "dead"}}
stateGraph arc lappend "arc3" actions {}
stateGraph arc insert "F1" "SummerFallow1" "arc7"
stateGraph arc lappend "arc7" rules {[apsimGet day]  == 192}
stateGraph arc lappend "arc7" actions {}
stateGraph arc insert "F1" "Chickpea" "arc0"
stateGraph arc lappend "arc0" actions {sow_chickpea}
stateGraph arc lappend "arc0" rules {[canPlant_chickpea]}
stateGraph arc lappend "arc0" actions {}
stateGraph arc insert "Chickpea" "SummerFallow1" "arc8"
stateGraph arc lappend "arc8" actions {apsimSendMessage chickpea harvest}
stateGraph arc lappend "arc8" actions {apsimSendMessage chickpea end_crop}
stateGraph arc lappend "arc8" rules {{[apsimGet chickpea.stage_name] == "harvest_ripe" || [apsimGet chickpea.plant_status] == "dead"}}
stateGraph arc lappend "arc8" actions {}
stateGraph arc insert "SummerFallow1" "Wheat" "arc1"
stateGraph arc lappend "arc1" actions {sow_wheat}
stateGraph arc lappend "arc1" rules {[canPlant_wheat]}
stateGraph arc lappend "arc1" actions {}
stateGraph arc insert "Cotton" "F1" "arc5"
stateGraph arc lappend "arc5" actions {apsimSendMessage cotton harvest}
stateGraph arc lappend "arc5" rules {[apsimGet ozcot_status] > 0}
stateGraph arc lappend "arc5" actions {}
stateGraph arc insert "SummerFallow2" "WinterFallow" "arc9"
stateGraph arc lappend "arc9" rules {[apsimGet day]  == 74}
stateGraph arc lappend "arc9" actions {}
]]></rule>
        </tclui>
        <tclui name="Wheat Sowing Rule">
          <rule name="Sample Rotation 1 Wheat Sowing Rule.out - Sowing rule - initialisation" condition="init" invisible="yes">
# Support procedures
# Can we plant a crop today?
proc canPlant_wheat {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     set d2 [clock format [clock scan "10-jul-$year"] -format %j]

     if {"no" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] &gt;= 25]
     set eswOK [expr [apsimGet esw] &gt;= 50]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_wheat {} {
  if {"plant" == "plant"} {
     apsimSendMessage wheat sow {plants 100} {sowing_depth 30} \
             {cultivar hartog} {row_spacing 250} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"plant" == "cropmod"} {
     apsimSendMessage wheat sow {plants [density]} {sowing_depth [depth]} \
             {cultivar hartog} {row_spacing 250} {skiprow 0}
  } elseif {"plant" == "growth"} {
     apsimSendMessage wheat ???
  } elseif {"plant" == "ozcot"} {
     apsimSendMessage wheat sow {plants_pm [plants_pm]} {sowing_depth 30} \
             {row_spacing 250} {skiprow 0} {cultivar hartog}
  } elseif {"plant" == "oryza"} {
     apsimSendMessage wheat sow {cultivar hartog}
  } elseif {"plant" == "sorghum"} {
     apsimSendMessage wheat sow {plants 100} {sowing_depth 30} \
             {cultivar hartog} {row_spacing 250} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"plant" == "sugar"} {
     apsimSendMessage wheat sow {plants 100} {cultivar hartog} {sowing_depth 30}
  } else {
    error "Unknown crop module \"plant\"."
  }
}





</rule>
          <ruletemplate name="Sowing rule - initialisation" condition="init">
# Support procedures
# Can we plant a crop today?
proc canPlant_[crop] {} {
  if {"[criteria]" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     set d2 [clock format [clock scan "[date2]-$year"] -format %j]

     if {"[must_sow]" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[[rainnumdays]\]] &gt;= [raincrit]]
     set eswOK [expr [apsimGet esw] &gt;= [esw_amount]]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"[criteria]" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"[criteria]\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_[crop] {} {
  if {"[module]" == "plant"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} \
             {skipplant [skipplant]} {skiprow [skiprow]} {crop_class [class]}
  } elseif {"[module]" == "cropmod"} {
     apsimSendMessage [crop] sow {plants [density]} {sowing_depth [depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]}
  } elseif {"[module]" == "growth"} {
     apsimSendMessage [crop] ???
  } elseif {"[module]" == "ozcot"} {
     apsimSendMessage [crop] sow {plants_pm [plants_pm]} {sowing_depth [sowing_depth]} \
             {row_spacing [row_spacing]} {skiprow [skiprow]} {cultivar [cultivar]}
  } elseif {"[module]" == "oryza"} {
     apsimSendMessage [crop] sow {cultivar [cultivar]}
  } elseif {"[module]" == "sorghum"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"[module]" == "sugar"} {
     apsimSendMessage [crop] sow {plants [plants]} {cultivar [cultivar]} {sowing_depth [sowing_depth]}
  } else {
    error "Unknown crop module \"[module]\"."
  }
}





</ruletemplate>
          <uiscript><![CDATA[source $apsuite/apsim/tcllink/lib/GenericSowingUI.tcl]]></uiscript>
          <crop>wheat</crop>
          <criteria>variable</criteria>
          <date1>15-may</date1>
          <date2>10-jul</date2>
          <raincrit>25</raincrit>
          <rainnumdays>3</rainnumdays>
          <esw_amount>50</esw_amount>
          <must_sow>no</must_sow>
          <plants>100</plants>
          <sowing_depth>30</sowing_depth>
          <row_spacing>250</row_spacing>
          <skipplant>0</skipplant>
          <skiprow>0</skiprow>
          <cultivar>hartog</cultivar>
          <class>plant</class>
          <module>plant</module>
        </tclui>
        <tclui name="Cotton Sowing Rule">
          <rule name="Sample Rotation 1 Cotton Sowing Rule.out - Sowing rule - initialisation" condition="init" invisible="yes">
# Support procedures
# Can we plant a crop today?
proc canPlant_cotton {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-oct-$year"] -format %j]
     set d2 [clock format [clock scan "15-dec-$year"] -format %j]

     if {"yes" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] &gt;= 10]
     set eswOK [expr [apsimGet esw] &gt;= 100]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-oct-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_cotton {} {
  if {"ozcot" == "plant"} {
     apsimSendMessage cotton sow {plants 100} {sowing_depth 30} \
             {cultivar Siok} {row_spacing 1000} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"ozcot" == "cropmod"} {
     apsimSendMessage cotton sow {plants [density]} {sowing_depth [depth]} \
             {cultivar Siok} {row_spacing 1000} {skiprow 0}
  } elseif {"ozcot" == "growth"} {
     apsimSendMessage cotton ???
  } elseif {"ozcot" == "ozcot"} {
     apsimSendMessage cotton sow {plants_pm 10} {sowing_depth 30} \
             {row_spacing 1000} {skiprow 0} {cultivar Siok}
  } elseif {"ozcot" == "oryza"} {
     apsimSendMessage cotton sow {cultivar Siok}
  } elseif {"ozcot" == "sorghum"} {
     apsimSendMessage cotton sow {plants 100} {sowing_depth 30} \
             {cultivar Siok} {row_spacing 1000} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"ozcot" == "sugar"} {
     apsimSendMessage cotton sow {plants 100} {cultivar Siok} {sowing_depth 30}
  } else {
    error "Unknown crop module \"ozcot\"."
  }
}






</rule>
          <ruletemplate name="Sowing rule - initialisation" condition="init">
# Support procedures
# Can we plant a crop today?
proc canPlant_[crop] {} {
  if {"[criteria]" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     set d2 [clock format [clock scan "[date2]-$year"] -format %j]

     if {"[must_sow]" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[[rainnumdays]\]] &gt;= [raincrit]]
     set eswOK [expr [apsimGet esw] &gt;= [esw_amount]]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"[criteria]" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"[criteria]\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_[crop] {} {
  if {"[module]" == "plant"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} \
             {skipplant [skipplant]} {skiprow [skiprow]} {crop_class [class]}
  } elseif {"[module]" == "cropmod"} {
     apsimSendMessage [crop] sow {plants [density]} {sowing_depth [depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]}
  } elseif {"[module]" == "growth"} {
     apsimSendMessage [crop] ???
  } elseif {"[module]" == "ozcot"} {
     apsimSendMessage [crop] sow {plants_pm [plants_pm]} {sowing_depth [sowing_depth]} \
             {row_spacing [row_spacing]} {skiprow [skiprow]} {cultivar [cultivar]}
  } elseif {"[module]" == "oryza"} {
     apsimSendMessage [crop] sow {cultivar [cultivar]}
  } elseif {"[module]" == "sorghum"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"[module]" == "sugar"} {
     apsimSendMessage [crop] sow {plants [plants]} {cultivar [cultivar]} {sowing_depth [sowing_depth]}
  } else {
    error "Unknown crop module \"[module]\"."
  }
}






</ruletemplate>
          <uiscript><![CDATA[source $apsuite/apsim/tcllink/lib/GenericSowingUI.tcl]]></uiscript>
          <crop>cotton</crop>
          <criteria>variable</criteria>
          <date1>15-oct</date1>
          <date2>15-dec</date2>
          <raincrit>10</raincrit>
          <rainnumdays>3</rainnumdays>
          <esw_amount>100</esw_amount>
          <must_sow>yes</must_sow>
          <plants_pm>10</plants_pm>
          <sowing_depth>30</sowing_depth>
          <row_spacing>1000</row_spacing>
          <skiprow>0</skiprow>
          <cultivar>Siok</cultivar>
          <module>ozcot</module>
          <plants>100</plants>
          <skipplant>0</skipplant>
          <class>plant</class>
        </tclui>
        <tclui name="Chickpea Sowing Rule">
          <rule name="Sample Rotation 1 Chickpea Sowing Rule.out - Sowing rule - initialisation" condition="init" invisible="yes">
# Support procedures
# Can we plant a crop today?
proc canPlant_chickpea {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     set d2 [clock format [clock scan "10-jul-$year"] -format %j]

     if {"no" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] &gt;= 15]
     set eswOK [expr [apsimGet esw] &gt;= 50]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_chickpea {} {
  if {"plant" == "plant"} {
     apsimSendMessage chickpea sow {plants 25} {sowing_depth 30} \
             {cultivar amethyst} {row_spacing 500} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"plant" == "cropmod"} {
     apsimSendMessage chickpea sow {plants [density]} {sowing_depth [depth]} \
             {cultivar amethyst} {row_spacing 500} {skiprow 0}
  } elseif {"plant" == "growth"} {
     apsimSendMessage chickpea ???
  } elseif {"plant" == "ozcot"} {
     apsimSendMessage chickpea sow {plants_pm } {sowing_depth 30} \
             {row_spacing 500} {skiprow 0} {cultivar amethyst}
  } elseif {"plant" == "oryza"} {
     apsimSendMessage chickpea sow {cultivar amethyst}
  } elseif {"plant" == "sorghum"} {
     apsimSendMessage chickpea sow {plants 25} {sowing_depth 30} \
             {cultivar amethyst} {row_spacing 500} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"plant" == "sugar"} {
     apsimSendMessage chickpea sow {plants 25} {cultivar amethyst} {sowing_depth 30}
  } else {
    error "Unknown crop module \"plant\"."
  }
}





</rule>
          <ruletemplate name="Sowing rule - initialisation" condition="init">
# Support procedures
# Can we plant a crop today?
proc canPlant_[crop] {} {
  if {"[criteria]" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     set d2 [clock format [clock scan "[date2]-$year"] -format %j]

     if {"[must_sow]" == "yes" &amp;&amp; $day == $d2} {return 1}

     if {$d1 &gt; $d2} {
        set dateOK [expr $day &gt;= $d1 || $day &lt;= $d2]
     } else {
        set dateOK [expr $day &gt;= $d1 &amp;&amp; $day &lt;= $d2]
     }
     set rainOK [expr [apsimGet rain\[[rainnumdays]\]] &gt;= [raincrit]]
     set eswOK [expr [apsimGet esw] &gt;= [esw_amount]]
     return [expr $dateOK &amp;&amp; $rainOK &amp;&amp; $eswOK]
  } elseif {"[criteria]" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "[date1]-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"[criteria]\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_[crop] {} {
  if {"[module]" == "plant"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} \
             {skipplant [skipplant]} {skiprow [skiprow]} {crop_class [class]}
  } elseif {"[module]" == "cropmod"} {
     apsimSendMessage [crop] sow {plants [density]} {sowing_depth [depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]}
  } elseif {"[module]" == "growth"} {
     apsimSendMessage [crop] ???
  } elseif {"[module]" == "ozcot"} {
     apsimSendMessage [crop] sow {plants_pm [plants_pm]} {sowing_depth [sowing_depth]} \
             {row_spacing [row_spacing]} {skiprow [skiprow]} {cultivar [cultivar]}
  } elseif {"[module]" == "oryza"} {
     apsimSendMessage [crop] sow {cultivar [cultivar]}
  } elseif {"[module]" == "sorghum"} {
     apsimSendMessage [crop] sow {plants [plants]} {sowing_depth [sowing_depth]} \
             {cultivar [cultivar]} {row_spacing [row_spacing]} {skiprow [skiprow]} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"[module]" == "sugar"} {
     apsimSendMessage [crop] sow {plants [plants]} {cultivar [cultivar]} {sowing_depth [sowing_depth]}
  } else {
    error "Unknown crop module \"[module]\"."
  }
}





</ruletemplate>
          <uiscript><![CDATA[source $apsuite/apsim/tcllink/lib/GenericSowingUI.tcl]]></uiscript>
          <crop>chickpea</crop>
          <criteria>variable</criteria>
          <date1>15-may</date1>
          <date2>10-jul</date2>
          <raincrit>15</raincrit>
          <rainnumdays>3</rainnumdays>
          <esw_amount>50</esw_amount>
          <must_sow>no</must_sow>
          <plants>25</plants>
          <sowing_depth>30</sowing_depth>
          <row_spacing>500</row_spacing>
          <skipplant>0</skipplant>
          <skiprow>0</skiprow>
          <cultivar>amethyst</cultivar>
          <class>plant</class>
          <module>plant</module>
          <plants_pm>
          </plants_pm>
        </tclui>
      </tclmanager>
      <wheat />
      <chickpea />
      <cotton />
      <outputfile name="outputfile">
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" description="Date (dd/mm/yyyy)" array="?" />
          <variable name="cotton.yield as cotton" description="" array="" />
          <variable name="wheat.yield as wyield" description="" array="No" />
          <variable name="chickpea.yield as cyield" description="" array="No" />
          <variable name="biomass" />
        </variables>
        <events name="Reporting Frequency">
          <event name="harvesting" description="" />
        </events>
      </outputfile>
      <fertiliser name="fertiliser" />
      <soil name="#009 - Kupunn">
        <Site>Kupunn</Site>
        <Region>South East Queensland</Region>
        <LocalName>Brigalow</LocalName>
        <SoilType>Grey Vertosol</SoilType>
        <NearestTown>Dalby, Q 4405</NearestTown>
        <NaturalVegetation>Brigalow, belah, wilga</NaturalVegetation>
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.4</bd>
            <ll15>0.21</ll15>
            <airdry>0.105</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.03</fbiom>
            <finert>0.4</finert>
            <no3>6.5</no3>
            <nh4>0.6</nh4>
            <oc>1.24</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.21</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.21</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.21</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.21</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.39</bd>
            <ll15>0.21</ll15>
            <airdry>0.189</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.02</fbiom>
            <finert>0.6</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <oc>1.24</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.21</ll>
            <kl name="Chickpea">0.1</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.21</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.21</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.21</ll>
            <kl name="Wheat">0.1</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.37</bd>
            <ll15>0.22</ll15>
            <airdry>0.22</airdry>
            <dul>0.4</dul>
            <sat>0.45</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.8</finert>
            <no3>2.1</no3>
            <nh4>0.1</nh4>
            <oc>1.25</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.22</ll>
            <kl name="Chickpea">0.08</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.22</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.26</ll>
            <kl name="Sorghum">0.1</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.25</ll>
            <kl name="Wheat">0.08</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.36</bd>
            <ll15>0.25</ll15>
            <airdry>0.25</airdry>
            <dul>0.41</dul>
            <sat>0.46</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.9</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>1.1</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.27</ll>
            <kl name="Chickpea">0.06</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.25</ll>
            <kl name="Cotton">0.1</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.26</ll>
            <kl name="Sorghum">0.08</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.28</ll>
            <kl name="Wheat">0.06</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.38</bd>
            <ll15>0.27</ll15>
            <airdry>0.27</airdry>
            <dul>0.4</dul>
            <sat>0.45</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.71</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.29</ll>
            <kl name="Chickpea">0.04</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.27</ll>
            <kl name="Cotton">0.09</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.28</ll>
            <kl name="Sorghum">0.06</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.31</ll>
            <kl name="Wheat">0.04</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.39</bd>
            <ll15>0.31</ll15>
            <airdry>0.31</airdry>
            <dul>0.39</dul>
            <sat>0.44</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.34</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.34</ll>
            <kl name="Chickpea">0.02</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.31</ll>
            <kl name="Cotton">0.07</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.34</ll>
            <kl name="Sorghum">0.04</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.37</ll>
            <kl name="Wheat">0.02</kl>
            <xf name="Wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.42</bd>
            <ll15>0.36</ll15>
            <airdry>0.36</airdry>
            <dul>0.38</dul>
            <sat>0.43</sat>
            <sw>9999.99</sw>
            <swcon>0.3</swcon>
            <fbiom>0.01</fbiom>
            <finert>0.95</finert>
            <no3>1.7</no3>
            <nh4>0.1</nh4>
            <oc>0.26</oc>
            <ph>7</ph>
            <ll name="Chickpea">0.38</ll>
            <kl name="Chickpea">0.01</kl>
            <xf name="Chickpea">1</xf>
            <ll name="Cotton">0.36</ll>
            <kl name="Cotton">0.05</kl>
            <xf name="Cotton">1</xf>
            <ll name="Sorghum">0.36</ll>
            <kl name="Sorghum">0.02</kl>
            <xf name="Sorghum">1</xf>
            <ll name="Wheat">0.38</ll>
            <kl name="Wheat">0.01</kl>
            <xf name="Wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>200</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <Comment>oc and ph not measured</Comment>
        <InitWater>
          <percentmethod>
            <percent>1</percent>
            <distributed>filled from top</distributed>
          </percentmethod>
        </InitWater>
        <InitNitrogen>
          <profile>
            <layer>
              <no3>6.500</no3>
              <nh4>0.600</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>150</thickness>
            </layer>
            <layer>
              <no3>2.100</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
            <layer>
              <no3>1.700</no3>
              <nh4>0.100</nh4>
              <thickness>300</thickness>
            </layer>
          </profile>
        </InitNitrogen>
      </soil>
    </area>
  </simulation>
</folder>