[standard.lucerne.constants]

crop_type = lucerne
default_crop_class = plant
part_names = root leaf stem pod grain energy

! legume_get_other_variables

                                           ! limits set to check inputs
sw_ub = 1.0
sw_lb = 0.0
year_ub                 = 2000      ()      !  year upper limit
year_lb                 = 1800      ()      !  year lower limit
latitude_ub             = 90        (oL)    !  latitude upper limit
latitude_lb             = -90       (oL)    !  latitude lower limit
maxt_ub                 = 55        (oC)    !  max. temperature upper limit
maxt_lb                 = 0         (oC)    !  max. temperature lower limit
mint_ub                 = 40        (oC)    !  min. temperature upper limit
mint_lb                 = -10       (oC)    !  min. temperature lower limit
radn_ub                 = 50        (MJ/m^2)!  radiation upper limit
radn_lb                 = 1         (MJ/m^2)!  radiation lower limit
dlayer_ub               = 1000      (mm)    !  layer depth upper limit
dlayer_lb               = 0         (mm)    !  layer depth lower limit
dul_dep_ub              = 1000      (mm)    !  drained upper limit upper limit
dul_dep_lb              = 0         (mm)    !  drained upper limit lower limit
sw_dep_ub               = 1000      (mm)    !  soil water upper limit
sw_dep_lb               = 0         (mm)    !  soil water lower limit
no3_ub                  = 10000     (kg/ha) !  soil nitrate upper limit
no3_lb                  = 0         (kg/ha) !  soil nitrate lower limit
no3_min_ub              = 10000     (kg/ha) !  min. soil nitrate upper limit
no3_min_lb              = 0         (kg/ha) !  min. soil nitrate lower limit


[standard.lucerne.lucerne]

plant = lucerne
regrowth = lucerne_regrowth lucerne
frosted = lucerne_frosted lucerne
reduced = lucerne_reduced lucerne
class_action = harvest   spray frost   reduce
class_change = regrowth  plant frosted reduced


stage_names = sowing germination emergence end_of_juvenile floral_initiation flowering start_grain_fill end_grain_fill maturity harvest_ripe end_crop ! stage names

!                     sow ger  eme  juv    fi    fl   st_gf end_gf  mat hv_rpe  end
stage_code           = 1   2   3     4     5     6     7      8     9    10     11  ()     ! numeric code for phenological stages
rue                  = 0   0   1.0  1.0   1.0   1.0   1.0   1.0   1.0   0.00    0  (g/MJ) ! 
root_depth_rate      = 0   0  10.0  10.0  10.0  10.0  10.0  10.0  10.0  10.0     0  (mm/d) !
ratio_root_shoot     = 0   0   1.0   0.5   0.5   0.5   0.1   0.1   0.1   0.1     0  (0-1)  !
N_fix_rate           = 0.0 0.0 0.0   0.02  0.03  0.01  0.01    0     0     0     0  (gN/gDM) ! Sin'87 - potential rate of N fixation (g N fixed per g above ground biomass)
transp_eff_cf        = 0.0 0.0 0.005 0.005 0.005 0.005 0.005 0.005 0.005 0.00    0  (Pa)   ! transpiration efficiency coefficient to convert vpd to transpiration efficiency (kpa)
frac_leaf_pre_flower = 0   0   0.45  0.45  0.45   0     0     0      0     0     0   (0-1) ! fraction of dm allocated to leaves prior to flowering

row_spacing_default = 500 (mm)
x_row_spacing      = 200  1000
y_extinct_coef     = 0.43 0.43
y_extinct_coef_dead= 0.30 0.30
        
extinct_coef_pod =  0.0 ()
spec_pod_area    =  0.0 (mm^2/g)
rue_pod          =  0.0 (g/MJ)

        ! crop failure

leaf_no_crit            = 10.0      ()      ! 10.0critical number of leaves, below
                                            !  which portion of the crop may
                                            !  die due to water stress
tt_emerg_limit          = 150.0     (oCd)   ! maximum degree days allowed for
                                            !  emergence to take place
days_germ_limit         = 40.0      (days)  ! maximum days allowed after dry sowing
                                            !  for germination to take place
swdf_pheno_limit        = 300.0      ()     ! 45.0 critical cumulative phenology        !PLP increased
                                            !  water stress, above which the crop
                                            !  completely fails
swdf_photo_limit        = 100.0       ()    ! 14.6 critical cumulative photosynthesis    !PLP increased
                                            !  water stress, above which the crop
                                            !  partly fails (unitless)
swdf_photo_rate         = 0.0       ()      ! rate of plant reduction with
                                            !  photosynthesis water stress

        ! lucerne_root_depth

initial_root_depth      = 50.0     (mm)    ! initial depth of roots

        ! legume_root_length

specific_root_length    = 60000     (mm/g)    !specific length of roots
root_die_back_fr        = 0.1       (0-1)     ! fraction of roots lost at harvest


x_plant_rld             = 0   0.0001  0.0003 
!y_rel_root_rate         = 0.02  0.10  1.0
y_rel_root_rate          = 1.0   1.0   1.0

        ! lucerne_leaf_area_init

initial_tpla            = 1.00    (mm^2/plant) ! initial total plant leaf area
min_tpla                = 50.0     (mm^2/plant) ! minimum leaf area

        ! TEMPLATE OPTION
        ! lucerne_leaf_area_devel

x_lai                   =     0.0    1.0  3.0   5.0  (mm2/mm2)  ! LAI
y_sla_max               =  60000  40000  30000 30000 (mm2/g)    ! maximum SLA at specified LAI

x_lai_ratio             = 0.0  0.8 1.0 ()           ! ratio table for critical leaf size
                                                 !  below which leaf number is reduced ()
y_leaf_no_frac          = 1.0  1.0 1.0 ()           ! reduction in leaf appearance ()

        ! lucerne_get_cultivar_params

tt_emerg_to_endjuv_ub          = 1000.0    (oCd)   ! upper limit
tt_flower_to_maturity_ub       = 10000.0   (oCd)   ! upper limit
tt_maturity_to_ripe_ub         = 1000.0    (oCd)   ! upper limit
tt_flower_to_start_grain_ub    = 10000.0   (oCd)  ! upper limit
tt_init_to_flower_ub           = 1000.0    (oCd)   ! upper limit

        ! lucerne_transp_eff

svp_fract               = 0.75      (0-1)   ! fraction of distance between svp at
                                            !  min temp and svp at max temp where
                                            !  average svp during transpiration lies.

        ! lucerne_germination

pesw_germ               = 0.0       (mm/mm) ! plant extractable soil water in
                                            !  seedling layer inadequate for
                                            !  germination
fasw_emerg = 0 1
rel_emerg_rate = 1 1

        ! lucerne_leaf_appearance

leaf_no_at_emerg        = 0.1       ()      ! leaf number at emergence


        ! lucerne_N_uptake

no3_diffn_const         = 2.0       (days)  ! time constant for N uptake by
                                            !  diffusion. H van Keulen &
                                            !  NG Seligman. Purdoe 1987. This is the
                                            !  time it would take to remove, by
                                            !  diffusion, the current amount of N if
                                            !  it wasn't depleted between time steps

n_supply_preference = active   ! preference for n supply - it is assumed that
                               ! mass flow is always predominant but further
                               ! crop preference can be specified as follows
                               ! 'active' = diffusive flow before fixation
                               ! 'fixation' = fixed N before active uptake.

        ! lucerne_phenology_init

shoot_lag               = 15.0      (oCd)   ! time lag before linear coleoptile
                                            !  growth starts
shoot_rate              = 2.0       (oCd/mm) ! thermal time required per mm elongation
                                            !  by coleoptile
leaf_app_rate1          = 80       (oCd)   ! thermal time required for node
                                            !  appearance on main stem
leaf_app_rate2          = 1.0    (lf/node)  ! total number of leaves per plant
                                              !  per main stem node
leaf_no_rate_change     = 1.0       ()      ! leaf no above which leaf appearance rate
                                            !  changes from rate1 to rate2
x_node_no_app    = 0    0.99 1   20
y_node_app_rate  = 51   51   51  51
x_node_no_leaf   = 0    0.99 1    20
y_leaves_per_node= 1    1    1    1 

        ! legume_dm_init

        ! root   leaf stem flower grain
dm_init = 0.002  0.005  0    0      0 (g/plant)  ! part weight at emergence

        ! legume_get_root_params
 
kl_ub                   = 1.0       ()      ! upper limit

        ! lucerne_retranslocate

stem_trans_frac         = 0.5       (0-1)   !0.0 fraction of stem used in translocation
                                            !  to grain
leaf_trans_frac         = 0.5      (0-1)   !0.10 fraction of leaf used in translocation
                                            !  to grain
        ! lucerne_N_dlt_grain_conc
                                            ! calculate the grain nitrogen concentration demand
sw_fac_max              = 1.125     ()      !  soil water stress factor maximum
temp_fac_min            = 0.69      ()      !  temperature stress factor minimum
sfac_slope              = -0.125    ()      !  soil water stress factor slope
tfac_slope              = 0.0125    ()      !  temperature stress factor slope


         ! legnew_leaf_death
 
node_sen_rate =   107
fr_lf_sen_rate =  0.1


        ! lucerne_event

grn_water_cont          = 0.155     (g/g)   ! water content of harvested grain

        ! lucerne_dm_partition


sla_min                 = 8000      (mm^2/g) ! minimum specific leaf area for
                                             !  new leaf area
frac_leaf_post_flower   = 0.1       (0-1)    ! fraction of dm allocated to leaves after
                                             !  flowering
frac_stem2pod           = 0.1      (0-1)     ! fraction of dm allocated to pod
                                             !  before grain fill
frac_pod2grain          = 1.0     (0-1)      ! fraction of dm partitioned to
                                             !  pod relative to grain during grain fill [from APS2.XLS]
frac_leaf_grain_fill    = 0.2                ! fraction of dm partitioned to leaf during grain fil
                                             ! from dm excess to requirements for seed & pod growth
grain_energy            = 1                  ! 1 = no energy


        ! legume_dm_senescence
 ! dm fraction senesced for each fraction of canopy senesced.
x_dm_sen_frac_root = 0    1     ! root
y_dm_sen_frac_root = 0.005 0.005        

x_dm_sen_frac_leaf = 0    1     ! leaf
y_dm_sen_frac_leaf = 0    1

x_dm_sen_frac_stem = 0    1     ! stem
!y_dm_sen_frac_stem = 0    0
y_dm_sen_frac_stem = 0    1

x_dm_sen_frac_pod = 0    1     ! flower
y_dm_sen_frac_pod = 0    0

x_dm_sen_frac_grain = 0    1     ! grain
y_dm_sen_frac_grain = 0    0
                                    
x_dm_sen_frac_energy = 0    1     ! energy
y_dm_sen_frac_energy = 0    0
                                            
        ! legume_dm_dead_detachment
                        ! root leaf stem flower grain
dead_detach_frac        =    0    0    0      0     0    (0-1)  ! fraction detached from each part
                                                                !  of a dead plant per day.
sen_detach_frac         =    1    0.07 0.05   0     0    (0-1)  ! fraction detached from senesced
                                                                ! plant material per day.
node_no_correction = 0.0 
x_node_no               = 0.0    4.0     15.0
y_leaf_size             = 0.0  400.0    1200.0

        ! TEMPLATE OPTION
        ! lucerne_leaf_area_sen_light

lai_sen_light           = 4.0       (m^2/m^2) ! LAI above which shade-induced
                                              !  senescence occurs
sen_light_slope         = 0.008     ()        ! sensitivity of leaf area senescence
                                              !  to shading


        ! TEMPLATE OPTION
        ! lucerne_leaf_area_sen_frost

x_temp_senescence       = -15.0  0.0  (oC)    ! temperature senescence table
y_senescence_fac        =   1.0  0.0  (0-1)   ! temperature senescence factor

        ! lucerne_leaf_area_sen_water

sen_rate_water          = 0.1       ()        ! 0.05 slope in linear eqn
                                              !  relating soil water
                                              !  stress during photosynthesis
                                              !  to leaf senesense rate


        ! lucerne_phenology_init

twilight                = -6.0      (degrees) ! Twilight is defined as the interval
                                              !  between sunrise or sunset and the
                                              !  time when the true centre of the sun
                                              !  is 6.0 or 2.2 degrees below the horizon.
                                              !  Sunrise or sunset is defined as when
                                              !  the true centre of the sun is 50'
                                              !  below the horizon.

        ! lucerne_N_conc_limits
                        ! emerg    juv      flower
x_stage_code            = 3       4        6        10   () ! stage code used in table

y_n_conc_max_leaf       = 0.0600   0.0600   0.0300  0.02 () ! leaf maximum N conc.
y_n_conc_crit_leaf      = 0.0600   0.0600   0.0300  0.02 () ! leaf critical N conc.
y_n_conc_min_leaf       = 0.0100   0.0100   0.0100  0.01 () ! leaf minimum N conc.

y_n_conc_max_stem       = 0.0600   0.0600   0.0250  0.02 () ! stem maximum N conc.
y_n_conc_crit_stem      = 0.0600   0.0600   0.0250  0.02 () ! stem critical N conc.
y_n_conc_min_stem       = 0.0100   0.0100   0.0100  0.01 () ! stem minimum N conc.

y_n_conc_max_pod        = 0.0600   0.0600   0.0200  0.02 () ! flower maximum N conc.
y_n_conc_crit_pod       = 0.0600   0.0600   0.0200  0.02 () ! flower critical N conc.
y_n_conc_min_pod        = 0.0100   0.0100   0.0100  0.01 () ! flower minimum N conc.


n_conc_crit_grain       = 0.017                      () ! grain maximum N conc.
n_conc_max_grain        = 0.017                      () ! grain critical N conc.
n_conc_min_grain        = 0.007                      () ! grain minimum N conc.

n_conc_crit_root        = 0.02500                    () ! root maximum N conc.   JPD guess
n_conc_max_root         = 0.02500                    () ! root critical N conc.
n_conc_min_root         = 0.01000                    () ! root minimum N conc.


        ! legume_N_init   
             !root leaf stem  flower grain
n_init_conc = 0.025 0.060 0.060  0     0 (g/g) ! 

        ! legume_N_senescence
           ! root  leaf  stem flower grain
n_sen_conc = 0.01 0.01   0.01   0      0  (g/g)   ! N conc. of senesced material


        ! lucerne_nfact

N_fact_photo            = 1.25      ()      ! multipler for N deficit effect on
                                            !  RUE
N_fact_pheno            = 5.75      ()      !5.75 multipler for N deficit effect
                                            !  on phenology
N_fact_expansion = 100.

        ! lucerne_rue_reduction

x_ave_temp              = 0.0  8.0 20.0 25.0  32.0  (oC)   !temperature table for RUE
y_stress_photo          = 0.0  1.0  1.0  1.0   0.0  (0-1)  !temperature factor on RUE

        ! TEMPLATE OPTION
        ! lucerne_dm_grain

x_temp_grain            = 3.7  30.0  56.3        (oC)   ! temperature table for
                                                        !  grain growth rate
y_grain_rate            = 0.0   0.1   0.0        (0-1)  ! temperature factor on
                                                        !  grain growth rate
        ! lucerne_tt

x_temp                  = 1.0  5.0  10  15  30  40        (oC)   ! temperature table for
                                                        !  thermal time
y_tt                    = 0.0  3.0  6.5 10  25  0.0        (oCd)  ! thermal time

x_vernal_temp           =  0    10
y_vernal_days           =  1     1

x_temp_root_advance     =  0    10
y_rel_root_advance      =  1     1


        ! lucerne_plants

x_weighted_temp         = 55.0  60.0             (oC)   ! temperature table for
                                                        !  seedling death during emergence
y_plant_death           =  0.0   1.0             (0-1)  ! temperature factor on
                                                        !  seedling death


        ! lucerne_swdef

x_sw_demand_ratio       = 0.1  1.5 !1.1               ()     ! soil water ratio for effect
                                                        !  on leaf expansion
y_swdef_leaf            = 0.0  1.0               (0-1)  ! stress index on
                                                        !  leaf expansion
x_sw_avail_ratio        = 0.0  0.28              ()     ! soil water ratio for effect
                                                        !  on phenology
y_swdef_pheno           = 1.0  1.0               (0-1)  ! stress index on
                                                        !  phenology
x_sw_ratio              = 0.0  0.25              ()     ! soil water ratio for effect
                                                        !  on root elongation
y_sw_fac_root           = 0.0  1.0               (0-1)  ! stress index on
                                                        !   root elongation
x_sw_avail_fix          = 0.0  0.8               ()     ! soil water ratio for effect
                                                        !  on N fixation
y_swdef_fix             = 0.0  1.0               (0-1)  ! stress index on
                                                        !  N fixation
oxdef_photo_rtfr        = 0.0  1.0
oxdef_photo             = 1.0  1.0

fr_height_cut           = 0.0 0.1    1
fr_stem_remain          = 0.0 0.2    1

!!!!!!!! section for regrowth !!!!!!!!!

[standard.lucerne.lucerne_regrowth]

class_action = harvest   spray frost    
class_change = unchanged plant frosted  

stage_names = sowing germination emergence end_of_juvenile floral_initiation flowering start_grain_fill end_grain_fill maturity harvest_ripe end_crop ! stage names

!                 sow ger  eme  juv    fi    fl   st_gf end_gf  mat hv_rpe  end
rue              = 0   0   1.2  1.2   1.2   1.1   1.1   1.1   1.1  0.00    0  (g/MJ) !
N_fix_rate       = 0.0 0.0 0.02   0.02  0.03  0.01  0.01    0     0     0     0  (gN/gDM) 

x_row_spacing      = 200  1000             ! 
y_extinct_coef     = 0.80 0.80
      
x_node_no_app    = 0    0.99 1   20
y_node_app_rate  = 34   34  34   34


!!!!!!!!! section for crop with frosted growing point regrowth !!!!!!!!!!!

!set rue = 0 - stop photosynthesis and transpiration
!set phyllochron to large number - stop node appearance
[standard.lucerne.lucerne_frosted]

class_action = harvest   spray frost    
class_change = regrowth  plant unchanged

stage_names = sowing germination emergence end_of_juvenile floral_initiation flowering start_grain_fill end_grain_fill maturity harvest_ripe end_crop ! stage names

!                 sow ger  eme  juv    fi    fl   st_gf end_gf  mat hv_rpe  end
rue              = 0   0   0     0     0     0     0      0     0    0.00    0  (g/MJ) !

x_node_no_app    = 0    0.99 1   20
y_node_app_rate  = 500  500  500 500

!!!!!!!!!! section for reduced RUE and delayed node appearance in autumn !!!!!!!!!

[standard.lucerne.lucerne_reduced]

class_action = harvest   spray  frost    reduce
class_change = regrowth  plant  frosted  unchanged

stage_names = sowing germination emergence end_of_juvenile floral_initiation flowering start_grain_fill end_grain_fill maturity harvest_ripe end_crop ! stage names

!                 sow ger  eme  juv    fi    fl   st_gf end_gf  mat hv_rpe  end
rue              = 0   0  0.45  0.60  0.60  0.50  0.55   1.0   1.0  0.00    0  (g/MJ) 

x_node_no_app    = 0    0.99 1   20
y_node_app_rate  = 51   51   51  51

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! CULTIVAR PARAMETERS !!!!!!!!!!!!!!!!!!!!!!!!!!!!

[standard.lucerne.hunter_river]

   hi_incr                    =    0.0001   (1/days)      ! rate of HI increase (optional)
   x_hi_max_pot_stress        =    0.0 1.0   ()          ! maximum harvest index potential
   y_hi_max_pot               =    0.5 0.5   ()  
   cum_vernal_days            =     0        100
   tt_emerg_to_endjuv         =    700       700    (oCd)! TT from emergence to end of juvenile phase 
   est_days_emerg_to_init     =  30         (d)          ! estimated days from emergence to floral init.
   x_pp_endjuv_to_init      = 10.7  17.0                 ! photoperiod (h)
   y_tt_endjuv_to_init      = 0    0                   ! TT from end juvenile to floral initiation
   x_pp_init_to_flower        =   1      24   (h)
   y_tt_init_to_flower        =   500.0  500.0  (oCd)           ! TT from initiation to flowering
   x_pp_flower_to_start_grain =   1      24   (h)   
   y_tt_flower_to_start_grain =  100.0   100 (oCd)           ! aps1 - TT from flowering to start grain fill 
   x_pp_start_to_end_grain =      1      24   (h)
   y_tt_start_to_end_grain =    9400    9400  (oCd) 
   tt_end_grain_to_maturity =    500.0   (oCd)
   tt_maturity_to_ripe        =    5.0    (oCd)          ! TT from maturity to harvest ripe 
   x_stem_wt                  = 0      5                ! stem weight (g/plant)
   y_height                   = 0      5000              ! plant height (mm)
! MEP for approx 60 stems/sq m *************
!   x_stem_wt                  = 0      7      ! stem weight (g/stem)
!   y_height                   = 0      2000   ! plant height (mm)

[standard.lucerne.trifecta]

   hi_incr                    =    0.0001   (1/days)      ! rate of HI increase (optional)
   x_hi_max_pot_stress        =    0.0 1.0   ()          ! maximum harvest index potential
   y_hi_max_pot               =    0.5 0.5   ()  
   cum_vernal_days            =     0        100
   tt_emerg_to_endjuv         =    700       700  (oCd)  ! TT from emergence to end of juvenile phase 
   est_days_emerg_to_init     =  30         (d)          ! estimated days from emergence to floral init.
   x_pp_endjuv_to_init      = 10.7  17.0                 ! photoperiod (h)
   y_tt_endjuv_to_init      = 0    0                   ! TT from end juvenile to floral initiation
   x_pp_init_to_flower        =   1      24   (h)
   y_tt_init_to_flower        =   500.0  500.0  (oCd)           ! TT from initiation to flowering
   x_pp_flower_to_start_grain =   1      24   (h)   
   y_tt_flower_to_start_grain =  100.0   100 (oCd)           ! aps1 - TT from flowering to start grain fill 
   x_pp_start_to_end_grain =      1      24   (h)
   y_tt_start_to_end_grain =    9400    9400  (oCd) 
   tt_end_grain_to_maturity =    500.0   (oCd)
   tt_maturity_to_ripe        =    5.0    (oCd)          ! TT from maturity to harvest ripe 
   x_stem_wt                  = 0      5                ! stem weight (g/plant)
   y_height                   = 0      5000              ! plant height (mm)
! MEP for approx 60 stems/sq m *************
!   x_stem_wt                  = 0      7      ! stem weight (g/stem)
!   y_height                   = 0      2000   ! plant height (mm)

[standard.lucerne.kaituna]

   hi_incr                    =    0.0001   (1/days)      ! rate of HI increase (optional)
   x_hi_max_pot_stress        =    0.0 1.0   ()          ! maximum harvest index potential
   y_hi_max_pot               =    0.5 0.5   ()  
   cum_vernal_days            =     0        100
   tt_emerg_to_endjuv         =    300       300  (oCd)  ! TT from emergence to end of juvenile phase 
   est_days_emerg_to_init     =  30         (d)          ! estimated days from emergence to floral init.
   x_pp_endjuv_to_init      = 13.5   16.5                ! photoperiod (h)
   y_tt_endjuv_to_init      = 525     325                  ! TT from end juvenile to floral initiation
   x_pp_init_to_flower        =   1      24   (h)
   y_tt_init_to_flower        =   60.0  60.0  (oCd)           ! TT from initiation to flowering
   x_pp_flower_to_start_grain =   1      24   (h)   
   y_tt_flower_to_start_grain =  100.0   100 (oCd)           ! aps1 - TT from flowering to start grain fill 
   x_pp_start_to_end_grain =      1      24   (h)
   y_tt_start_to_end_grain =    9400    9400  (oCd) 
   tt_end_grain_to_maturity =    500.0   (oCd)
   tt_maturity_to_ripe        =    5.0    (oCd)          ! TT from maturity to harvest ripe 
   x_stem_wt                  = 0      5                ! stem weight (g/plant)
   y_height                   = 0      5000              ! plant height (mm)


